<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="#30DaysOfSWA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="#30DaysOfSWA Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XQTX19ZF9V"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XQTX19ZF9V",{anonymize_ip:!0})</script><title data-rh="true">30 posts tagged with &quot;swa&quot; | #30DaysOfSWA</title><meta data-rh="true" property="og:image" content="https://www.azurestaticwebapps.dev/img/logo.png"><meta data-rh="true" property="og:url" content="https://www.azurestaticwebapps.dev/blog/tags/swa"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="30 posts tagged with &quot;swa&quot; | #30DaysOfSWA"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="twitter:url" content="https://www.azurestaticwebapps.dev/blog/devtools-swacli-develop"><meta data-rh="true" name="twitter:title" content="##19: Develop with SWA CLI"><meta data-rh="true" name="twitter:description" content="Join @sinedied on #30DaysOfSWA as debuts the new SWA CLI for @AzureStaticApps and walks through the build process!"><meta data-rh="true" name="twitter:image" content="https://www.azurestaticwebapps.dev/assets/images/19-banner-ecd588da06f9f1af0f0e8a5f3323aa20.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@nitya"><meta data-rh="true" name="twitter:site" content="@AzureStaticApps"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://www.azurestaticwebapps.dev/blog/tags/swa" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.azurestaticwebapps.dev/blog/tags/swa" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://dev.to/azure/get-started-with-the-new-azure-static-web-apps-cli-mm3"><link rel="stylesheet" href="/assets/css/styles.061b8712.css">
<link rel="preload" href="/assets/js/runtime~main.1df1f584.js" as="script">
<link rel="preload" href="/assets/js/main.bdfe7c17.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#50E6FF;color:#552F99" role="banner"><div class="announcementBarContent_KsVm"><b>Found this project helpful? Give us a star on <a href="https://aka.ms/30DaysOfSWA/github"><b>GitHub</b></a></b> üôèüèΩ</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="#30DaysOfSWA Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="#30DaysOfSWA Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">#30DaysOfSWA</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Learn</a><a href="https://portal.azure.com/?feature.customportal=false&amp;WT.mc_id=30daysofswa-61155-ninarasi#create/Microsoft.StaticApp" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Deploy</a><a class="navbar__item navbar__link" href="/contribute">Contribute</a><a class="navbar__item navbar__link" href="/showcase">Showcase</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/resources">Resources</a><a href="https://github.com/staticwebdev/30DaysOfSWA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_TMXw thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_V4zb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_uHd5 clean-list"><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/practices-full-stack-react">#28: Full-Stack SWA: React + Mongoose</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/practices-cosmosdb">#27: Video Conf with ACS &amp; SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/practices-byo-functions">#26: Azure Functions &amp; SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/practices-case-study">#25: KlipTok &amp; SWA: Case Study</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/practices-cognitive-services">#24: Cognitive Services &amp; SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/practices-cognitive-search">#23: Cognitive Search &amp; SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/practices-e2e">#22: E2E Development &amp; SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/devtools-vscode">#21: Develop With VSCode</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/devtools-swacli-deploy">#20: Deploy with SWA CLI</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/devtools-swacli-develop">#19: Develop with SWA CLI</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/devtools-msedge">#18: Debug with Edge DevTools</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/devtools-ado">#17: Multi-Stage Deploy with ADO</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/devtools-playwright">#16: Test Automation with Playwright</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/devtools-azure">#15: Develop with Azure Tools</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/show-and-tell">#14: Show &amp; Tell: A SWArm Of Apps</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/pwa-on-swa">#13: Hosting PWA on Static Web Apps</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/build-with-blazor">#12: Headless CMS &amp; Blazor SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/build-with-docusaurus">#11: Share Content - with Docusaurus</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/build-with-vuejs">#10: Get Creative - with Vue.js</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/build-with-react">#09: Manage Inventory - with React</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/build-with-astro">#08: Build A Blog - with Astro</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/deploying-swa">#07: Deploying SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/previewing-swa">#06: Previewing SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/securing-swa">#05: Securing SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/configuring-swa">#04: Configuring SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/api-enabling-swa">#03: API-Enabling SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/building-swa">#02: Building SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/introducing-swa">#01: Introducing SWA</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/kickoff">Kickoff #30DaysOfSWA!</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/swanniversary">It&#x27;s the SWA-anniversary!!</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>30 posts tagged with &quot;swa&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/practices-full-stack-react">#28: Full-Stack SWA: React + Mongoose</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-29T00:00:00.000Z" itemprop="datePublished">May 29, 2022</time> ¬∑ <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/GeekTrainer" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/GeekTrainer.png" alt="Christopher Harrison"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/GeekTrainer" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Christopher Harrison</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Developer Advocate @Microsoft</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to <code>Week 4, Day 7</code> of <strong>#30DaysOfSWA</strong>!!</p><p>We&#x27;re at the last post of the series, so let&#x27;s close the loop to where we started on Day 1. We started by talking about End-to-End Developer Experiences built on Azure Static Web Apps - and continued with a series of posts exploring various Azure service integrations that showcase this vision. Wouldn&#x27;t it be great if you could have one end-to-end development example that you could use as a <strong>starter</strong> for your next prototype? Let&#x27;s end this week with the perfect example. Today we&#x27;ll look at an end-to-end developer workflow for a full-stack app:</p><ul><li>Front-end built with <a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">React</a> and <a href="https://redux-toolkit.js.org/" target="_blank" rel="noopener noreferrer">Redux Toolkit</a></li><li>Back-end built with <a href="https://docs.microsoft.com/azure/static-web-apps/add-api?tabs=vanilla-javascript" target="_blank" rel="noopener noreferrer">Azure Functions</a></li><li>Deployed to the cloud with <a href="https://docs.microsoft.com/en-us/azure/static-web-apps/" target="_blank" rel="noopener noreferrer">Azure Static Web Apps</a></li><li>With a <a href="https://docs.microsoft.com/azure/cosmos-db/mongodb/mongodb-introduction" target="_blank" rel="noopener noreferrer">MongoDB database hosted in Cosmos DB</a>, accessed using <a href="https://mongoosejs.com/" target="_blank" rel="noopener noreferrer">Mongoose</a></li><li>(Optionally, with Playwright testing)</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-well-cover">What We&#x27;ll Cover<a class="hash-link" href="#what-well-cover" title="Direct link to heading">‚Äã</a></h2><ul><li>Building a Full-Stack App</li><li>Why use Mongoose?</li><li>Why use Redux Toolkit?</li><li><strong>Build</strong>: Implement and deploy the React/Mongoose template</li><li><strong>Exercise</strong>: Add your own features</li></ul><p><img loading="lazy" src="/assets/images/28-banner-aab132c8523d51f1fc3653502c480d82.png" width="1000" height="420" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="building-a-full-stack-app-with-swa">Building a Full-Stack App with SWA<a class="hash-link" href="#building-a-full-stack-app-with-swa" title="Direct link to heading">‚Äã</a></h2><p>In the first week of this series, we looked <a href="/blog/building-swa">Building Static Web Apps</a> using an <strong>existing starter template</strong> and learned about options for working with Azure Static Web Apps:</p><ol><li><a href="https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=react" target="_blank" rel="noopener noreferrer">using VS Code</a> - if you prefer an IDE</li><li><a href="https://docs.microsoft.com/en-us/azure/static-web-apps/get-started-cli?tabs=react" target="_blank" rel="noopener noreferrer">using Azure CLI</a> - if you prefer the command-line</li><li><a href="https://docs.microsoft.com/en-us/azure/static-web-apps/get-started-portal?tabs=react&amp;pivots=github" target="_blank" rel="noopener noreferrer">using Azure Portal</a> - if you prefer a browser-based workflow </li><li><a href="https://azure.github.io/static-web-apps-cli/docs/use/install" target="_blank" rel="noopener noreferrer">using Azure Static Web Apps CLI</a> - if you prefer a unified develop-deploy tool</li></ol><p>The default starter templates (for vanillaJS, React, Angular, Blazor, Vue) use a simple <strong>front-end application</strong> to validate your local development setup, and familiarize you with the automated build/deploy workflow setup by Azure Static Web Apps. </p><p>Today we&#x27;ll look at something different - a <a href="https://github.com/staticwebdev/mongoose-starter" target="_blank" rel="noopener noreferrer">mongoose-starter</a> template for building a <strong>full-stack application</strong> with a React/Redux front-end, a serverless back-end (using Azure Functions) and a NoSQL database (using Azure CosmosDB API for MongoDB) that works seamlessly with the popular mongoose client. </p><p>Learn more about creating full-stack apps using this technology stack, in this video:</p><iframe src="https://learn-video.azurefd.net/vod/player?show=azure-tips-and-tricks-static-web-apps&amp;ep=create-javascript-serverless-apps-w-azure-static-web-apps-etc-14-of-16--azure-tips-and-tricks" width="600" height="400" frameborder="0"></iframe><h2 class="anchor anchorWithStickyNavbar_mojV" id="why-use-mongoose">Why use Mongoose?<a class="hash-link" href="#why-use-mongoose" title="Direct link to heading">‚Äã</a></h2><p>When accessing a data store you can either use APIs to interact directly with the backend or use a library which can provide additional functionality. Many developers prefer to use a library as it allows them to focus more on creating their code and logic while offloading some of the work. Mongoose is just such a library.</p><p><a href="https://mongoosejs.com/" target="_blank" rel="noopener noreferrer">Mongoose</a> is an Object-Database-Mapper (ODM) which allows you to define the objects you need to store in a NoSQL database. Mongoose can be used with any database which supports MongoDB APIs, which <a href="https://docs.microsoft.com/azure/cosmos-db/mongodb/mongodb-introduction" target="_blank" rel="noopener noreferrer">Cosmos DB does</a>. With Mongoose you can create schemas for your data, enforce validation, and streamline the process of interacting with your data.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="why-use-redux-toolkit">Why use Redux Toolkit?<a class="hash-link" href="#why-use-redux-toolkit" title="Direct link to heading">‚Äã</a></h2><p><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer">Redux</a> is the most popular tool for managing state in a <a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">React</a> application. <a href="https://redux-toolkit.js.org/" target="_blank" rel="noopener noreferrer">Redux Toolkit</a> helps create projects which use Redux by providing an additional framework for some of the most common tasks when using Redux. Redux Toolkit includes functions to streamline the process of creating reducers and updating and accessing state.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="quickstart-using-the-reactmongoose-template">Quickstart: Using the React/Mongoose template<a class="hash-link" href="#quickstart-using-the-reactmongoose-template" title="Direct link to heading">‚Äã</a></h2><p>To help jump start your development process, we&#x27;ll <a href="https://github.com/staticwebdev/mongoose-starter" target="_blank" rel="noopener noreferrer">use the mongoose-starter template</a> built on the following libraries and tools:</p><ul><li>React</li><li>Redux Toolkit</li><li>Mongoose</li><li><a href="https://github.com/node-config/node-config#readme" target="_blank" rel="noopener noreferrer">Node-config</a></li><li>SWA CLI</li></ul><p>The template is a todo application and contains models for items and lists (which contain the items). It uses <a href="https://docs.microsoft.com/azure/static-web-apps/authentication-authorization?tabs=invitations" target="_blank" rel="noopener noreferrer">GitHub authentication through Azure Static Web Apps</a>. To support local development, a <code>devcontainer.json</code> file is included <a href="https://code.visualstudio.com/docs/remote/containers" target="_blank" rel="noopener noreferrer">use a dev container</a>.</p><p>Follow <strong><a href="https://docs.microsoft.com/azure/static-web-apps/add-mongoose" target="_blank" rel="noopener noreferrer">this tutorial</a></strong> to build and deploy the full-stack application to Azure Static Web Apps by completing the following steps:</p><ul><li>create the Cosmos DB server</li><li>create a new repository from the template</li><li>create the Azure Static Web App</li><li>configure the Azure Static Web App</li><li>use the site</li></ul><p><strong>Watch this segment</strong> to walk interactively through the process of using the mongoose-starter template build/deploy the basic project to Azure Static Web Apps.</p><iframe src="https://learn-video.azurefd.net/vod/player?show=azure-tips-and-tricks-static-web-apps&amp;ep=how-to-create-your-azure-static-web-apps-from-a-github-template-15-of-16--azure-tips-and-tricks" width="600" height="400" frameborder="0"></iframe><p><strong>And watch this segment</strong> to learn how you can setup and configure your Azure CosmosDB resource to work with your Azure Static Web Apps deployment.</p><iframe src="https://learn-video.azurefd.net/vod/player?show=azure-tips-and-tricks-static-web-apps&amp;ep=setup-cosmos-db-w-a-mongodb-api-to-use-w-azure-static-web-apps-16-of-16--azure-tips--tricks" width="600" height="400" frameborder="0"></iframe><h2 class="anchor anchorWithStickyNavbar_mojV" id="exercise-add-your-own-features">Exercise: Add your own features<a class="hash-link" href="#exercise-add-your-own-features" title="Direct link to heading">‚Äã</a></h2><p>The template is designed to be used as the starter for your own projects. </p><p>To build upon what you&#x27;ve learned, you could <strong>explore expanding the functionality</strong> by adding your own features. Clone the repository you created and begin writing your own code! This could include:</p><ul><li>allowing items to be labeled</li><li>implementing archive functionality</li><li>potentially incorporating <a href="https://docs.microsoft.com/azure/cognitive-services/language-service/sentiment-opinion-mining/quickstart?pivots=programming-language-javascript" target="_blank" rel="noopener noreferrer">artificial intelligence to detect the sentiment of tasks</a>.</li></ul><p>Alternatively, use what you learned to add CosmosDB as a database for an application built using a different front-end framework  - try one of the usage examples from Week 2, or enhance something you&#x27;ve already built.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">‚Äã</a></h2><p>Here is a collection of resources you may find helpful for digging more into creating applications hosted on Azure Static Web Apps:</p><ul><li>SWA Quickstart: <a href="https://docs.microsoft.com/azure/static-web-apps/get-started-cli?tabs=react" target="_blank" rel="noopener noreferrer">Using Azure CLI</a></li><li><a href="https://reactjs.org/tutorial/tutorial.html" target="_blank" rel="noopener noreferrer">Official Tutorial: Intro to React</a></li><li><a href="https://docs.microsoft.com/learn/paths/react/" target="_blank" rel="noopener noreferrer">Creating your first web apps with React</a> - on Microsoft Learn</li><li><a href="https://github.com/microsoft/Web-Dev-For-Beginners" target="_blank" rel="noopener noreferrer">Web Dev For Beginners</a> - project-based curriculum</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/swa">swa</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/30-days">30days</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/best-practices">best-practices</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/react">react</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/mongoose">mongoose</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about #28: Full-Stack SWA: React + Mongoose" href="/blog/practices-full-stack-react"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/practices-cosmosdb">#27: Video Conf with ACS &amp; SWA</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-28T00:00:00.000Z" itemprop="datePublished">May 28, 2022</time> ¬∑ <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/davrous" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/davrous.png" alt="David Rousset"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/davrous" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">David Rousset</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Program Manager @Microsoft</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to <code>Week 4, Day 6</code> of <strong>#30DaysOfSWA</strong>!! </p><p>In an earlier example this week, we looked at a real-world case study with KlipTok, involving Azure Static Web Apps integration with <em>multiple</em> backend services, to deliver the desired user experience. Today we look at another great example of an end-to-end development workflow that involves multiple service integrations - this time with a focus on deliver a rich video conferencing web application experience. Let&#x27;s learn how to build this with <strong>a workflow that involves Azure Static Web Apps, Azure Functions, Azure CosmosDB - and Azure Communications Services (ACS)</strong>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-well-cover">What We&#x27;ll Cover<a class="hash-link" href="#what-well-cover" title="Direct link to heading">‚Äã</a></h2><ul><li>What is Azure Communications Services (ACS)?</li><li>The Video Conference Authentication Workflow<ul><li>Azure Static Web Apps for social authentication</li><li>Azure CosmosDB to store ACS identity information</li><li>Azure Functions to map social auth to ACS identity</li></ul></li><li>A Static Web App - hosting a Metaverse? ü§Ø</li><li><strong>Exercise</strong> Deploy the sample yourself following the step-by-step tutorial</li></ul><p><img loading="lazy" src="/assets/images/27-banner-5146de1cca8588633d6475561df82410.png" width="1000" height="420" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-is-azure-communications-services-acs">What is Azure Communications Services (ACS)?<a class="hash-link" href="#what-is-azure-communications-services-acs" title="Direct link to heading">‚Äã</a></h2><p><a href="https://docs.microsoft.com/en-us/azure/communication-services/overview" target="_blank" rel="noopener noreferrer">Azure Communication Services (ACS)</a> is a set of <strong>rich communication, video, and SMS APIs</strong> to deploy your applications across any device, on any platform. If you want to enable emails, chat, audio/video conferencing, phone calls or SMS inside an existing app, this service is right for you. You can view it as your building blocks to create your own custom version of Microsoft Teams, it uses the same underlying infrastructure. This <a href="https://www.forbes.com/advisor/business/software/what-is-cpaas/" target="_blank" rel="noopener noreferrer">CPaaS</a> (Communications Platform As A Service) will manage scalability, quality &amp; availability of this service for you. This platform is also built on top of our secure and compliant cloud.  </p><p>Watch this short video for a quick introduction üëáüèº</p><iframe width="560" height="315" src="https://www.youtube.com/embed/chMHVHLFcao" title="YouTube video player" frameborder="0"></iframe><p>Of course, this service comes with a price. You can find the cost of each service by visiting‚ÄØ<a href="https://azure.microsoft.com/en-us/pricing/details/communication-services/" target="_blank" rel="noopener noreferrer">Azure Communication Services pricing | Microsoft Azure</a>. </p><p>ACS exposes its services via‚ÄØvarious SDKs:‚ÄØ<a href="https://github.com/Azure/communication" target="_blank" rel="noopener noreferrer">Azure Communication Services ‚Äì Samples and Tools</a> available for‚ÄØJavaScript,‚ÄØ.NET,‚ÄØJava,‚ÄØAndroid,‚ÄØiOS‚ÄØ&amp;‚ÄØPython‚ÄØdevelopers. </p><p>You can also optionally use this on top of the ACS UI library:‚ÄØ<a href="https://azure.github.io/communication-ui-library/?path=/story/overview--page" target="_blank" rel="noopener noreferrer">Overview ‚Äì Page ‚ãÖ Storybook</a> which consists of React-based components implementing the‚ÄØ<a href="https://developer.microsoft.com/fluentui/" target="_blank" rel="noopener noreferrer">Microsoft Fluent Design</a>‚ÄØto help you build visually engaging web apps. The best sample mixing all of these concepts is <strong><a href="https://docs.microsoft.com/en-us/azure/communication-services/samples/calling-hero-sample?pivots=platform-web" target="_blank" rel="noopener noreferrer">Group calling hero sample ‚Äì An Azure Communication Services sample overview</a></strong>. </p><p>To give you a brief idea, watch this 2 min video tutorial that shows you how to get the internal ACS authentication token to connect to its infrastructure. I can then join an existing Teams meeting using a simple web page and the ACS JavaScript SDK:</p><iframe width="560" height="315" src="https://www.youtube.com/embed/FFBBLUtRyZw" title="YouTube video player" frameborder="0"></iframe><p><strong>Want to follow along at home?</strong> You simply need to:</p><ul><li><a href="https://docs.microsoft.com/en-us/azure/communication-services/quickstarts/create-communication-resource?tabs=windows&amp;pivots=platform-azp" target="_blank" rel="noopener noreferrer">Create an Azure Communication Services resource in your Azure Portal</a> </li><li>Navigate to <a href="https://aka.ms/acsquicktest" target="_blank" rel="noopener noreferrer">https://aka.ms/acsquicktest</a> and follow the video tutorial above.</li></ul><p>You‚Äôll discover that, by default, Azure Communication Services provides the basic authentication &amp; identity layer. But you need to build on top of it to connect your own identity platform. Let‚Äôs see how to do that, next!</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="building-an-authentication-layer-with-azure-function-cosmosdb--static-web-app">Building an authentication layer with Azure Function, CosmosDB &amp; Static Web App<a class="hash-link" href="#building-an-authentication-layer-with-azure-function-cosmosdb--static-web-app" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="1-azure-static-web-apps---social-authentication">1. Azure Static Web Apps - social authentication<a class="hash-link" href="#1-azure-static-web-apps---social-authentication" title="Direct link to heading">‚Äã</a></h3><p>Well, it turns out that SWA provides an awesome out of the box authentication experience. To know more about it, please read: <a href="https://docs.microsoft.com/en-us/azure/static-web-apps/authentication-authorization?tabs=invitations" target="_blank" rel="noopener noreferrer">Authentication and authorization for Azure Static Web Apps</a>. In seconds, without any additional code required, you‚Äôll have an authentication layer provided to you!</p><p>We‚Äôre going to use it as our front end to welcome and authenticate our users. </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="2-azure-functions---map-to-acs-identity">2. Azure Functions - map to ACS identity<a class="hash-link" href="#2-azure-functions---map-to-acs-identity" title="Direct link to heading">‚Äã</a></h3><p>Then, we will map their social account identity with the internal ACS identity via an Azure Function. The Azure Function will store the mapping into a small CosmosDB table. Here‚Äôs the flow. </p><p>First, you‚Äôll land on a page asking you to choose your favorite social provider:</p><p><img loading="lazy" alt="Screenshot of the Static Web App sample showing the Twitter, Github, Microsoft &amp;amp; Google logos" src="/assets/images/ACSSWA001-e655d56ddaf55e97d82a83a96250c726.jpg" width="1536" height="610" class="img_E7b_"></p><p>Then, once authenticated, you‚Äôll be directly connected to the Azure Communication Services infrastructure. No need to generate a token or whatever, the Azure Function took care of it. I‚Äôve been using my Twitter account in this screenshot for instance:</p><p><img loading="lazy" alt="Screenshot of the Static Web App sample once authentified, showing the web camera active" src="/assets/images/ACSSWA002-cfcc34d95d25a76a1e84c8d0a8a82873.jpg" width="2256" height="1434" class="img_E7b_"></p><p>You see that the UI shows how my Twitter account, <em>davrous@twitter</em>, is mapped to the internal ACS user ID <em>8:acs:4ba98fcc</em>‚Ä¶ that you should normally not share to the users of course üòâ. </p><p>Thanks to that, you‚Äôre ready to call friends and colleagues immediately or join a Teams meeting via simply using their social account email address as the person to call.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="3-azure-functions--cosmosdb-binding">3. Azure Functions + CosmosDB Binding<a class="hash-link" href="#3-azure-functions--cosmosdb-binding" title="Direct link to heading">‚Äã</a></h3><p>Let‚Äôs have a look to the Azure Function code enabling this scenario. First, you can see in the <a href="https://github.com/davrous/acsauth/blob/main/api/users/function.json" target="_blank" rel="noopener noreferrer">function.json file</a> that I‚Äôm using the CosmosDB binding feature. To know more about this feature:</p><ul><li><a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-cosmosdb-v2-input?tabs=in-process%2Cfunctionsv2&amp;pivots=programming-language-javascript" target="_blank" rel="noopener noreferrer">Azure Cosmos DB input binding for Functions 2.x and higher</a></li><li><a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-cosmosdb-v2-output?tabs=in-process%2Cfunctionsv2&amp;pivots=programming-language-csharp" target="_blank" rel="noopener noreferrer">Azure Cosmos DB output binding for Functions 2.x and higher</a></li></ul><p>In a nutshell, via a simple declaration in the <em>function.json</em> file, you have a simple data access layer available in your Azure Function code for free. </p><p>If you look into my json file, I‚Äôm defining a route under <em>users/{email}/{lookup:bool?}</em> that will be exposed under 2 functions in my Azure Function: <em>setUser</em> as the output binding (to write or update into CosmosDB) and <em>getUser</em> as the input binding (to read from CosmosDB). </p><p>In this declaration file, I‚Äôm also asking the Azure Function to use the CosmosDB database named ‚Äú<em>ACS</em>‚Äù with the table named ‚Äú<em>users</em>‚Äù using ‚Äú<em>email</em>‚Äù parameter as the partition key. </p><p><em>getUser</em> will be called with a first required parameter which is an email address associated to the ACS internal identity. It has a second optional parameter which is a boolean. This asks to the Azure Function to do a simple resolve query to return the internal ACS id associated with the email address. It‚Äôs useful when you‚Äôd like to call someone on ACS by simply providing his email address rather than being forced to know its internal ACS identity (starting with <em>8:acs:xxx</em>).</p><p><em>setUser</em> simply create a new record or update it.</p><p>You can find the complete source code of the Azure Function there: <a href="https://github.com/davrous/acsauth/blob/main/api/users/index.ts" target="_blank" rel="noopener noreferrer">acsauth/index.ts at main ¬∑ davrous/acsauth (github.com)</a>. </p><p>The first block is simply doing the resolve logic I was mentioning just before. The second block is first checking if the user has already been created in the CosmosDB table and if the ACS token is still valid. Indeed, ACS tokens are valid for 24 hours only. If the user doesn‚Äôt exist or if its token has expired, we‚Äôre using the ACS JavaScript SDK to create a new identity &amp; authentication token to map it to the email address. </p><p>If you‚Äôre interested in the ACS identity concepts, please read:</p><ul><li><a href="https://docs.microsoft.com/en-us/azure/communication-services/concepts/identity-model" target="_blank" rel="noopener noreferrer">Identity model - An Azure Communication Services concept</a></li><li><a href="https://docs.microsoft.com/en-us/azure/communication-services/quickstarts/access-tokens?pivots=programming-language-javascript" target="_blank" rel="noopener noreferrer">Quickstart - Create and manage access tokens - An Azure Communication Services quickstart</a></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="4-cosmosdb---stores-acs-identity-data">4. CosmosDB - stores ACS identity data<a class="hash-link" href="#4-cosmosdb---stores-acs-identity-data" title="Direct link to heading">‚Äã</a></h3><p>Now, let‚Äôs have a look to what‚Äôs stored in the CosmosDB table thanks to the Azure Portal:</p><p><img loading="lazy" alt="Screenshot of Azure Portal, in the CosmosDB blade showing the content of the table" src="/assets/images/ACSSWA003-6bfaf3849bb96b70144a46f3aa55ac37.jpg" width="2196" height="909" class="img_E7b_"></p><p>You can find all the required information for my scenario:</p><ul><li><strong>id</strong>: an email address coming from the social network, which is my partition key and my primary key for my requests</li><li><strong>userId</strong>: the associated internal ACS identity in the form of 8:acs:xxxx.</li><li><strong>userToken</strong>: the associated internal ACS authentication token required to be able to connect to the ACS infrastructure</li><li><strong>expiresOn</strong>: when the ACS authentication token will expire</li></ul><p>The beauty of the Azure Function binding feature is that I didn‚Äôt have to write any code to manage the reading or writing part of the records. It can even update an existing record if needed. </p><p>With few lines of code, I‚Äôve been able to create a small authentication layer on top of ACS to create users mapped to ACS internal identity. With the out of the box Static Web App authentication experience, I didn‚Äôt even need to write any code to authenticate users with their social identity!</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="a-static-web-app-hosting-a-metaverse-">A Static Web App hosting a Metaverse? ü§Ø<a class="hash-link" href="#a-static-web-app-hosting-a-metaverse-" title="Direct link to heading">‚Äã</a></h2><p>In the same sample, I‚Äôve been building on top of the architecture described just above a small metaverse using <a href="https://www.babylonjs.com" target="_blank" rel="noopener noreferrer">Babylon.js</a>, an open source &amp; free WebGL engine I‚Äôve been contributing to. The logic is identical to what I‚Äôve described up to now. </p><p>Thanks to the SWA, I‚Äôm authenticating the user using his social profile. But then, I can do the video call to another ACS user or someone in Teams from a 3D scene. And everything is waayyy cooler inside a 3D scene, right? </p><p><img loading="lazy" alt="Screenshot of the Static Web App with a 3D scene of a museum loaded" src="/assets/images/ACSSWA004-2c90a2336105c38bffc821977311f72f.jpg" width="1914" height="1431" class="img_E7b_"></p><p>But wait, there‚Äôs even better. You can experience this Babylon.js scene in VR thanks to its native WebXR support! To give you an idea, here‚Äôs a video where I‚Äôm using my Valve Index to call my girl friend in Teams so we can visit this museum together.</p><iframe width="560" height="315" src="https://www.youtube.com/embed/Wd4qNeLV_P8" title="YouTube video player" frameborder="0"></iframe><p>If you‚Äôre interested in WebXR, I‚Äôve written a full article on what you can build with it sharing lot of my samples: <a href="https://www.davrous.com/2022/04/12/from-gaming-to-metaverses-building-webxr-apps-with-babylon-js/" target="_blank" rel="noopener noreferrer">From gaming to metaverses, building WebXR apps with Babylon.js ‚Äì David Rousset (davrous.com)</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="exercise">Exercise<a class="hash-link" href="#exercise" title="Direct link to heading">‚Äã</a></h2><p>If you‚Äôd like to play and learn from this sample mixing ACS, SWA, Azure Function, CosmosDB &amp; Babylon.js, you can <strong>deploy it in less than 10 minutes</strong> by following the step-be-step tutorial available in this associated repo: <a href="https://github.com/davrous/acsauth" target="_blank" rel="noopener noreferrer">davrous/acsauth: Deploy in less than 10 min an Azure Communication Services sample to be shared &amp; tested with your colleagues &amp; friends</a>.</p><p>Enjoy and see you in the metaverse! üòä</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/swa">swa</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/30-days">30days</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/best-practices">best-practices</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about #27: Video Conf with ACS &amp; SWA" href="/blog/practices-cosmosdb"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/practices-byo-functions">#26: Azure Functions &amp; SWA</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-27T00:00:00.000Z" itemprop="datePublished">May 27, 2022</time> ¬∑ <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://craigshoemaker.net/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/craigshoemaker.png" alt="Craig Shoemaker"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://craigshoemaker.net/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Craig Shoemaker</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Content Developer @Microsoft</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to <code>Week 4, Day 5</code> of <strong>#30DaysOfSWA</strong>!! </p><p>All week, we&#x27;ll explore end-to-end development workflows with Azure Static Web Apps as one component that is integrated with other services to deliver an enhanced modern web application experience.</p><p>The default Azure Static Web Apps architecture separates the web application into two components: static assets (served from global content distribution services) and dynamic API endpoints (implemented using serverless architectures). In our <a href="/blog/tags/blog/deploying-swa">API-enabling SWA</a> post, we focused on <strong>Managed Functions</strong>, where the Azure Static Web Apps service configures and manages your Azure Functions Deployment.</p><p>Today, we&#x27;ll explore the other option <strong>Bring Your Own Functions</strong> - where you can use pre-existing (or independently developed) Azure Functions applications and manage their deployment separately.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-well-cover">What We&#x27;ll Cover<a class="hash-link" href="#what-well-cover" title="Direct link to heading">‚Äã</a></h2><ul><li>What is &quot;Bring Your Own Functions&quot; (BYOF)? </li><li>Benefits of BYOF over Managed Functions</li><li>Switching from Managed Functions to BYOF</li><li><strong>Resources</strong>: Building Serverless apps with Azure Functions</li><li><strong>Exercise</strong>: Complete <a href="https://docs.microsoft.com/en-us/learn/modules/automatic-update-of-a-webapp-using-azure-functions-and-signalr/" target="_blank" rel="noopener noreferrer">this learning module</a>, add real-time updates to your SWA!</li></ul><p><img loading="lazy" src="/assets/images/26-banner-ee6f6144b61a1105d00210e8edd5b271.png" width="1000" height="420" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-does-bring-your-own-functions-byof-mean">What does &quot;Bring Your Own Functions&quot; (BYOF) mean?<a class="hash-link" href="#what-does-bring-your-own-functions-byof-mean" title="Direct link to heading">‚Äã</a></h2><p>In our <a href="/blog/tags/blog/deploying-swa">API-enabling SWA</a> post, we mentioned that the Azure Static Web App can implement Serverless API using Azure Functions in two ways:</p><ul><li><strong>Managed Functions</strong> - where the Azure Static Web Apps service configures and manages your Azure Functions deployment.</li><li><strong>Bring Your Own Functions</strong> - where you use a pre-existing Azure Functions application and manage the deployment yourself.</li></ul><p>The second option means that you build and deploy a serverless application using Azure Functions that exists <em>independent</em> of your Azure Static Web App deployment. These applications can make use of the <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview" target="_blank" rel="noopener noreferrer">full Azure Functions feature set</a> without any of the limitations imposed for Managed Functions in SWA. All you need to do is <strong>configure</strong> the Static Web App service to use this new serverless API endpoint.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="why-bring-your-own-functions">Why &quot;Bring Your Own Functions&quot;?<a class="hash-link" href="#why-bring-your-own-functions" title="Direct link to heading">‚Äã</a></h2><p>Bring Your Own Functions is a power feature of Azure Static Web Apps that lets you link existing Functions apps and allows you to <strong>avoid the restrictions of Managed Functions</strong>. This means you can:</p><ul><li>Implement and run functions in any language using <strong><a href="https://docs.microsoft.com/azure/azure-functions/functions-custom-handlers" target="_blank" rel="noopener noreferrer">custom handlers</a></strong>.</li><li>Use <strong><a href="https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings?tabs=csharp" target="_blank" rel="noopener noreferrer">triggers and bindings</a></strong> to create complex workflows with ease.</li><li>Implement <strong><a href="https://docs.microsoft.com/azure/azure-functions/durable/durable-functions-overview?tabs=csharp" target="_blank" rel="noopener noreferrer">Durable Functions</a></strong> that remain stateful in serverless contexts.</li><li>Use any other Azure Functions features and adopt <strong><a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-best-practices?tabs=csharp" target="_blank" rel="noopener noreferrer">best practices</a></strong>.</li></ul><p>These kinds of capabilities become critical when you deploy real-world applications at scale. Note that Azure Static Web Apps has two hosting plans: free and standard where the Free tier supports only Managed Functions. To take advantage of the power of &quot;Bring Your Own Functions&quot; you need to be on the standard plan.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="linking-an-existing-functions-app">Linking an existing Functions app<a class="hash-link" href="#linking-an-existing-functions-app" title="Direct link to heading">‚Äã</a></h2><p>Using an existing Functions app in Static Web Apps is easy - <strong>all your have to do is link the two apps together</strong>. Once you create the link, then a Functions app published under the following URL:</p><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">https://my-functions-app.azurewebsites.net/api/data</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>...is now also available under the <code>api</code> route in your static web app. </p><p>For instance:</p><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">https://red-sea-123.azurestaticapps.net/api/data</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Linking an existing Functions app is a two step process: (1) Update the <a href="https://docs.microsoft.com/azure/static-web-apps/configuration" target="_blank" rel="noopener noreferrer">staticwebapp.config.json</a> file, and (2) Link the apps via the Azure portal.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="1-update-the-configuration">1. Update the configuration<a class="hash-link" href="#1-update-the-configuration" title="Direct link to heading">‚Äã</a></h3><p>Edit your site&#x27;s <code>staticwebapp.config.json</code> file to make these changes:</p><ul><li>Set the <code>api_location</code> value to an empty string (<code>&quot;&quot;</code>)</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="2-link-apps-via-the-azure-portal">2. Link apps via the Azure portal<a class="hash-link" href="#2-link-apps-via-the-azure-portal" title="Direct link to heading">‚Äã</a></h3><p>Navigate to your static web app in the Azure portal and make these changes:</p><ul><li>Click on <strong>Functions</strong> in the <em>Settings</em> menu</li><li>Click <strong>Production</strong> in the <em>Environment</em> dropdown</li><li>Click <strong>Link to Function app</strong> next to the <em>Functions type</em> dropdown</li><li>Select your subscription from the <em>Subscription</em> dropdown</li><li>Select your Functions app name from the <em>Function App</em> dropdown</li><li>Click the <strong>Link</strong> button</li></ul><p>Now your Functions app is linked to your website and is available under the <code>api</code> route for your Static Web App!</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="1-overview">1. Overview<a class="hash-link" href="#1-overview" title="Direct link to heading">‚Äã</a></h3><p>Are you new to the whole idea of serverless applications and a Functions-based backend? Watch this video overview of Azure Functions - then check out the <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-reference?tabs=blob" target="_blank" rel="noopener noreferrer">developer guide</a>.</p><iframe width="640" height="360" src="https://www.youtube.com/embed/8-jz5f_JyEQ" title="YouTube video player" frameborder="0"></iframe><h3 class="anchor anchorWithStickyNavbar_mojV" id="2-quickstart">2. Quickstart<a class="hash-link" href="#2-quickstart" title="Direct link to heading">‚Äã</a></h3><p>Want to get a quickstart with Azure Functions? You can code your functions in C#, Java, JavaScript, PowerShell, Python, TypeScript and more (e.g., Go, Rust). For example, you can create JavaScript Functions apps in the following ways:</p><ul><li><a href="https://docs.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-node" target="_blank" rel="noopener noreferrer">Using Visual Studio Code</a></li><li><a href="https://docs.microsoft.com/en-us/azure/azure-functions/create-first-function-cli-node?tabs=azure-cli%2Cbrowser" target="_blank" rel="noopener noreferrer">Using Commandline Tools</a></li><li><a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-create-first-function-resource-manager?tabs=visual-studio-code%2Cazure-cli" target="_blank" rel="noopener noreferrer">Using an ARM Template</a> = JSON configuration file</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="3-learning-path">3. Learning Path<a class="hash-link" href="#3-learning-path" title="Direct link to heading">‚Äã</a></h3><p>Want a more comprehensive tour of Azure Functions features and capabilities, with hands-on modules? Try the <a href="https://docs.microsoft.com/en-us/learn/paths/create-serverless-applications/" target="_blank" rel="noopener noreferrer">Create Serverless Applications</a> learning path. It has 11 modules covering both core concepts and usage examples.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="exercise">Exercise<a class="hash-link" href="#exercise" title="Direct link to heading">‚Äã</a></h2><p>Complete <a href="https://docs.microsoft.com/en-us/learn/modules/automatic-update-of-a-webapp-using-azure-functions-and-signalr/" target="_blank" rel="noopener noreferrer">this learning module</a>to learn how to use Azure SignalR to get real-time updates to your app using Azure Functions. <em>Then put that learning to use by updating one of your existing SWA projects to use this capability</em>.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/swa">swa</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/30-days">30days</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/best-practices">best-practices</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about #26: Azure Functions &amp; SWA" href="/blog/practices-byo-functions"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/practices-case-study">#25: KlipTok &amp; SWA: Case Study</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-26T00:00:00.000Z" itemprop="datePublished">May 26, 2022</time> ¬∑ <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/csharpfritz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/csharpfritz.png" alt="Jeff Fritz"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/csharpfritz" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jeff Fritz</span></a></div><small class="avatar__subtitle" itemprop="description">Program Manager @Microsoft</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to <code>Week 4, Day 4</code> of <strong>#30DaysOfSWA</strong>!! </p><p>Week 4 focuses on Best Practices for Azure Static Web Apps. In the last two posts we explored Azure Services integrations that enhance and extend the capabilities of your deployed static website. Today, we take things in a different direction with our first <strong>Case Study</strong> - featuring  <a href="https://kliptok.com" target="_blank" rel="noopener noreferrer">KlipTok</a>, a <a href="https://twitch.tv" target="_blank" rel="noopener noreferrer">Twitch</a> clip search and indexing service built by Jeff Fritz, and hosted on Azure Static Web Apps!</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-well-cover">What We&#x27;ll Cover<a class="hash-link" href="#what-well-cover" title="Direct link to heading">‚Äã</a></h2><ul><li>What is KlipTok?</li><li>Why did KlipTok choose Azure Static Apps?</li><li>How do Azure Static Apps and Blazor work together?</li><li><strong>Exercise</strong>: Check out the <a href="https://kliptok.com" target="_blank" rel="noopener noreferrer">KlipTok</a> website and see it in action.</li></ul><p><img loading="lazy" src="/assets/images/25-banner-cc7ac88ea8ec3a509d9e466aa991ce50.png" width="1000" height="420" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="kliptok-makes-twitch-videos-searchable">KlipTok Makes Twitch Videos Searchable<a class="hash-link" href="#kliptok-makes-twitch-videos-searchable" title="Direct link to heading">‚Äã</a></h2><p><a href="https://kliptok.com" target="_blank" rel="noopener noreferrer">KlipTok</a> is a website that I started building while streaming live on Twitch in November 2019.  At the time, I wanted to build a website that would allow folks to discover Twitch clips from their favorite creators in the same way that they navigate and interact with TikTok. </p><p><a href="https://twitch.tv" target="_blank" rel="noopener noreferrer">Twitch</a> is a live-streaming service that many people use to watch folks play video games.  When something interesting happens on Twitch, viewers can isolate a clip (up to 60 seconds long) from the stream and share it with their friends.  These clips are often fun and interesting, but typically they are not discoverable.  This is <strong>KlipTok&#x27;s goal - index and make those clips more available to everyone</strong>.</p><p><img loading="lazy" alt="Screenshot of the KlipTok Website" src="/assets/images/kliptok-site-b225ffed0aaa079117dbfd68b1ec4419.png" width="1143" height="783" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="how-does-kliptok-work">How does KlipTok Work?<a class="hash-link" href="#how-does-kliptok-work" title="Direct link to heading">‚Äã</a></h2><p>Behind the scenes, KlipTok monitors Twitch for new clips from streamers that are signed up with the site and indexes them.  The clips are then transcribed and searchable on the site.  Visitors can view, like, and comment on clips.  Additionally, anyone can create playlists of clips to share with their friends.</p><iframe width="560" height="315" src="https://www.youtube.com/embed/6uMCAHEM8Es" title="YouTube video player" frameborder="0"></iframe><p>You can read the full story behind my decision process <a href="https://jeffreyfritz.com/2021/04/introducing-kliptok/" target="_blank" rel="noopener noreferrer">on my blog</a> or watch me build a subset of its features on a livestream in Nov 2020, in the video above.</p><p>After the first 18 months of running KlipTok, the <strong>application currently manages almost 12 million clips, totalling nearly 60 GB of data in the index</strong>.  You can view the live dashboard at <a href="https://kliptok.com/status" target="_blank" rel="noopener noreferrer">kliptok.com/status</a> to see the current status of the application.</p><p> <img loading="lazy" alt="Screenshot of the KlipTok dashboard showing almost 12 million clips" src="/assets/images/kliptok-dashboard-7e7559d51f8308b612ef84568c0269ca.png" width="690" height="231" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="kliptok-chooses-azure-static-apps">KlipTok Chooses Azure Static Apps<a class="hash-link" href="#kliptok-chooses-azure-static-apps" title="Direct link to heading">‚Äã</a></h2><p> I chose <a href="https://docs.microsoft.com/en-us/azure/static-web-apps/overview" target="_blank" rel="noopener noreferrer">Azure Static Apps</a> to build and deploy the KlipTok application, and to help demonstrate <a href="https://blazor.net" target="_blank" rel="noopener noreferrer">Blazor</a> running at scale in a large application.  This allows the application to <strong>scale the HTTP services to deliver content</strong> into the browser while delivering a high-performance experience with the Blazor application running in the browser on top of WebAssembly. </p><p> KlipTok also operates a second <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview" target="_blank" rel="noopener noreferrer">Azure Functions</a> service called the &#x27;BackOffice&#x27; that performs the <strong>synchronization of Twitch clips</strong> and other data aggregation tasks.  When new channels are added to KlipTok for monitoring, the BackOffice service is triggered with a message on <a href="https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-messaging-overview" target="_blank" rel="noopener noreferrer">Azure Service Bus</a> to add the channel and begin processing their clips for the index.  </p><p> We also use this Backoffice functions app to create an <a href="https://docs.microsoft.com/en-us/dotnet/machine-learning/" target="_blank" rel="noopener noreferrer">ML.NET</a> model that is used to <strong>recommend streamers to the user</strong>.  The model is trained on the collection of channels that KlipTok users follow and recommends channels to users based on other users who follow the same channels.	The model is updated every day with new data to help make more accurate recommendations to logged in KlipTok users. </p><p> By Twitch&#x27;s terms of service, no videos are allowed to be shipped off of their platform for the first 24 hours after they are recorded.  This means that the clips should be referenced and embedded from Twitch using their own clip player, saving KlipTok from having to download and store the content. KlipTok can now deliver appropriate SEO-optimized content as well as render open-graph cards appropriate for Twitter, Facebook, LinkedIn and other sites.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="the-kliptok-architecture">The KlipTok Architecture<a class="hash-link" href="#the-kliptok-architecture" title="Direct link to heading">‚Äã</a></h2><p>We do have one small problem when using Blazor Web Assembly and Azure Static Websites -- search engines and social media sites do not know <strong>how to crawl and present web assembly generated content</strong>.  </p><p>To solve this, I added <a href="https://docs.microsoft.com/en-us/azure/frontdoor/front-door-overview" target="_blank" rel="noopener noreferrer">Azure Front Door</a> to the site with an Azure App Service we ironically call the &#x27;Static Site&#x27;. Azure Front Door is Microsoft‚Äôs modern cloud Content Delivery Network (CDN) - allowing us to take advantage of a globally-distributed edge network to make our content delivery faster and more efficient.</p><p>With a few rules added to Azure Frontdoor (to detect bots), users can now be redirected to the static site and KlipTok can deliver appropriate SEO optimized content along with the <a href="https://ogp.me/" target="_blank" rel="noopener noreferrer">open-graph</a> cards for Twitter, Facebook, LinkedIn and other social sharing sites.</p><p> <img loading="lazy" alt="Simplified Diagram of the KlipTok System Architecture" src="/assets/images/kliptok-architecture-simplified-36827cbae5acd8f594b589288919d468.png" width="632" height="485" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="why-azure-static-web-apps">Why Azure Static Web Apps?<a class="hash-link" href="#why-azure-static-web-apps" title="Direct link to heading">‚Äã</a></h2><p>When KlipTok was originally conceived, I wanted to <strong>spend very little money and allow the site to scale easily</strong> with new traffic as it grows.  As a C# and Blazor developer, this gave me the perfect intersection of my favorite technologies, keep costs low, and start to develop an application that demonstrates the capabilities of Blazor with a <strong>VERY</strong> large dataset.</p><p>Over time, the system components of KlipTok have matured and been swapped out.  Azure Table Storage gave way to MySQL and has been since replaced by RavenDb.  The Azure Functions were originally communicating using Azure Queues, and many of them are now using Azure Service Bus.</p><p>This maturing of the system components has allowed me to build and understand how other customers are using Azure and how we can improve the product to make developers of systems like KlipTok more productive. </p><p>Using Azure Static Web Apps makes it easier for developers to integrate other Azure services - which then makes it possible for me to evolve KlipTok&#x27;s architecture and capabilities quickly, to reflect changing needs.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="swa--blazor-made-for-each-other">SWA &amp; Blazor: Made for each other<a class="hash-link" href="#swa--blazor-made-for-each-other" title="Direct link to heading">‚Äã</a></h2><p>As a developer, I&#x27;ve been very happy with the combination of Blazor and Azure Static Web Apps.  The ability to build a Blazor application and know that I will always have APIs scaling to meet my customers needs is a huge plus.</p><p>Blazor Web Assembly uses an HttpClient to communicate with web servers;in the case of an Azure Static Web App it communicated with an HTTP triggered function.  This allows me to dramatically simplify the definition and interaction of front-end code and the back-end code.</p><p>For example: when a user clicks the <strong>Like</strong> button on a clip, the Blazor application can post a message to the hosted function to increment the like count.  This function then updates the like count in RavenDb, then updates the UI with the new like count.  The Blazor application needn&#x27;t wait for the function to complete before updating the UI - it can just add or subtract one from the like count.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">‚Äã</a></h2><p>KlipTok has been an absolute joy to build and the journey to deliver it has been a great success.  I&#x27;m very excited to continue working on KlipTok and continue to grow the application while discovering and demonstrating more cool Blazor and Azure features. Have questions or comments? Find me on Twitch </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="exercise">Exercise<a class="hash-link" href="#exercise" title="Direct link to heading">‚Äã</a></h2><ul><li><strong>Want to see this Azure Static Web App in action</strong>? Click over to <a href="https://kliptok.com" target="_blank" rel="noopener noreferrer">KlipTok</a> and login with your Twitch account! Then browse the site  to have KlipTok start showing you clips from your favorite creators. </li><li><strong>Want to explore building your own Azure Static Web App with Blazor?</strong> Check out my <a href="/blog/build-with-blazor#exercise-remix-fritzs-hats">earlier blog post</a> for a great exercise where you&#x27;ll start with my open-source project - <a href="https://github.com/csharpfritz/Fritz.HatCollection" target="_blank" rel="noopener noreferrer">Fritz&#x27;s Really Cool Hats</a> - to customize, build and deploy a Blazor-powered app to Azure Static Web Apps.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/swa">swa</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/30-days">30days</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/best-practices">best-practices</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about #25: KlipTok &amp; SWA: Case Study" href="/blog/practices-case-study"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/practices-cognitive-services">#24: Cognitive Services &amp; SWA</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-25T00:00:00.000Z" itemprop="datePublished">May 25, 2022</time> ¬∑ <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/Yonet" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/Yonet.png" alt="Ay≈üeg√ºl Y√∂net"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Yonet" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Ay≈üeg√ºl Y√∂net</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Developer Advocate @Microsoft</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to <code>Week 4, Day 3</code> of <strong>#30DaysOfSWA</strong>!!</p><p>We continue our Best Practices week by looking at year another Azure Services integration option for your Azure Static Web Apps deployment. Yesterday we talked about adding search to your website using pre-trained Azure AI models. Today we&#x27;ll discuss how you can use Vision AI Services.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-well-cover">What We&#x27;ll Cover<a class="hash-link" href="#what-well-cover" title="Direct link to heading">‚Äã</a></h2><ul><li>What are Azure Vision Services</li><li>How to get started building your AI applications</li><li>How to use the JavaScript AI SDKs</li><li>How to analyze a document using Form Recognizer</li><li>How to deploy your APIs and Static Web App(SWA)</li><li><strong>Exercise</strong> <a href="https://docs.microsoft.com/samples/azure-samples/js-e2e-client-cognitive-services/build-and-deploy-a-static-web-app-to-azure/?WT.mc_id=javascript-68057-ayyonet" target="_blank" rel="noopener noreferrer">Build and deploy a SWA to analyse images</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">‚Äã</a></h2><ul><li><a href="https://aka.ms/AzureCustomVision" target="_blank" rel="noopener noreferrer">Azure Custom Vision</a> - Documentation</li><li><a href="https://docs.microsoft.com/en-us/learn/paths/explore-computer-vision-microsoft-azure/?WT.mc_id=javascript-68057-ayyonet" target="_blank" rel="noopener noreferrer">Azure AI Fundamentals: Explore computer vision</a> - Learn Module</li><li><a href="https://docs.microsoft.com/azure/static-web-apps/deploy-nextjs?WT.mc_id=javascript-68057-ayyonet" target="_blank" rel="noopener noreferrer">SWA Next.js </a> - Documentation</li></ul><p><img loading="lazy" src="/assets/images/24-banner-ab6720f7206b937aa107fdbb0084e7e9.png" width="1000" height="420" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-are-azure-vision-services">What are Azure Vision Services?<a class="hash-link" href="#what-are-azure-vision-services" title="Direct link to heading">‚Äã</a></h2><p>Azure AI Vision is part of <a href="https://docs.microsoft.com/azure/cognitive-services/what-are-cognitive-services?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Azure Cognitive Services</a> - cloud-based AI services that give you Terminator-like powers.</p><p><img loading="lazy" src="https://media.giphy.com/media/NHUaA15Nk910hFczxu/giphy.gif" class="img_E7b_"></p><p>You can take a picture and <a href="https://docs.microsoft.com/azure/cognitive-services/computer-vision/quickstarts-sdk/image-analysis-client-library?tabs=visual-studio&amp;pivots=programming-language-javascript&amp;WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">analyze it to describe the image, detect objects, landmarks and famous people</a> or <a href="https://docs.microsoft.com/azure/cognitive-services/face/build-enrollment-app?tabs=android&amp;WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">your users</a>, <a href="https://docs.microsoft.com/azure/cognitive-services/computer-vision/quickstarts-sdk/client-library?tabs=visual-studio&amp;pivots=programming-language-javascript&amp;WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">read documents</a> and scan information on an ID or a business card. All of these superpowers are available to you - an API call away - using Azure‚Äôs Cognitive and Applied AI Services. Let‚Äôs dive into what we can build and what we can customize.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="get-started-building-ai-apps">Get Started building AI apps<a class="hash-link" href="#get-started-building-ai-apps" title="Direct link to heading">‚Äã</a></h2><p>If you are planning to infuse your application with AI, the first place you need to look at is our <a href="https://docs.microsoft.com/azure/applied-ai-services/?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Applied AI Services</a>. Applied AI services are solving the most common use cases and build on top of our Cognitive Services. In terms of Vision related services, we have two Applied AI Services, <a href="https://docs.microsoft.com/azure/applied-ai-services/form-recognizer/?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Form Recognizer</a> and <a href="https://docs.microsoft.com/azure/azure-video-analyzer/?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Video Analyzer</a>.</p><p>Azure Form Recognizer is built using <a href="https://docs.microsoft.com/azure/cognitive-services/computer-vision/overview-ocr?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Optical Character Recognition(OCR)</a>, <a href="https://docs.microsoft.com/azure/cognitive-services/language-service/overview?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Text Analytics</a> and <a href="https://docs.microsoft.com/azure/cognitive-services/language-service/custom-text-classification/overview?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Custom Text</a> from Azure Cognitive Services and has <a href="https://docs.microsoft.com/azure/applied-ai-services/form-recognizer/concept-custom?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">custom trained models</a> for things like vaccination cards, passports and tax documentation. If you are wondering why you need Form Recognizer, you can try reverse engineering some of its features by using the Cognitive Services.</p><p><img loading="lazy" src="https://media.giphy.com/media/tH2Ur5u1wpfPDNHhgm/giphy.gif" alt="Building things from scratch instea of using a ready solution" class="img_E7b_"></p><p>I won‚Äôt wish that for any of you and that‚Äôs why your first stop should be <a href="https://docs.microsoft.com/azure/applied-ai-services/?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Applied AI Services documentation</a> to see if your problem is solvable by any of these services. Whenever your problem is not solved or you need more flexibility, you can build with Cognitive Services, <a href="https://docs.microsoft.com/azure/cognitive-services/computer-vision/overview-image-analysis?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Computer Vision</a>, <a href="https://docs.microsoft.com/azure/cognitive-services/custom-vision-service/?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Custom Vision</a> or <a href="https://docs.microsoft.com/azure/cognitive-services/face/overview?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Face</a> APIs.</p><p>A great way to start playing with these APIs and explore your specific use case is through <a href="https://preview.vision.azure.com/" target="_blank" rel="noopener noreferrer">Vision Studio Preview</a> or <a href="https://formrecognizer.appliedai.azure.com/studio" target="_blank" rel="noopener noreferrer">Form Recognizer Studio preview</a>. For example, I was wondering if I can recognize Mixed Reality devices using Computer Vision. Since these devices are very new and still not a common object, they were not recognized by our all-purpose object detection model. Before building an app, I was able to easily see that I need to train a custom model. You can check and see your logo or your product is easily recognizable or you should start training a custom model on the Studio without writing any code and find the code samples right inside the Studio.</p><p>If the object you want to detect is not recognized, you can train a custom model through <a href="https://customvision.ai" target="_blank" rel="noopener noreferrer">customvision.ai</a> and deploy it. You will get a custom API endpoint to call and your client implementation won‚Äôt be different than using any other service. There are couple of best practices for training a custom model. Most importantly, you need a variety of images in different contexts. For example if you want to find Waldo, you can‚Äôt just train with Waldo‚Äôs profile picture, you need to also use his pictures in a crowd.</p><p>You can read how I‚Äôve trained my custom model and built an <a href="https://medium.com/microsoftazure/no-code-ai-app-with-azure-cognitive-services-custom-vision-and-power-apps-ca47c019dcd0" target="_blank" rel="noopener noreferrer">No Code prototype here</a> using <a href="https://docs.microsoft.com/ai-builder/overview?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Power Apps AI Builder</a></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="how-to-use-the-javascript-ai-sdks">How to use the JavaScript AI SDKs<a class="hash-link" href="#how-to-use-the-javascript-ai-sdks" title="Direct link to heading">‚Äã</a></h2><p>Using any of these APIs works pretty much the same way if you are working with an image instead of a video to analyze:</p><ul><li>Sign into your Azure account or <a href="https://azure.microsoft.com/free/?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">sign up for $200 free credit</a>.</li><li><a href="https://docs.microsoft.com/en-us/azure/cognitive-services/cognitive-services-apis-create-account?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Create an Azure Cognitive Services or Specific service resource</a> and get the key and endpoint information.</li><li>Install the related service‚Äôs <a href="https://www.npmjs.com/~azure-sdk" target="_blank" rel="noopener noreferrer">JavaScript SDK</a> and <a href="https://www.npmjs.com/package/@azure/identity" target="_blank" rel="noopener noreferrer">Azure Identity SDK</a>.</li><li>Take a picture or upload an image.</li><li>Initialize an AzureCredentials object using your resource key.</li><li>Initialize a Client object with the Azure credential object &amp; endpoint.</li><li>Use the client‚Äôs analyze method to make an API call, wait for response.</li></ul><p>The class and method names change, like <code>DocumentAnalysisClient</code> for Form Recognizer, <code>PredictionAPIClient</code> for Custom Vision or <code>FaceClient</code> for facial recognition. If you are training a custom model or using a specific model for form recognizer, you have couple of things that you will do but the most important part of it is taken care of by our SDK functionality.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="how-to-analyze-a-document-using-form-recognizer">How to analyze a document using Form Recognizer<a class="hash-link" href="#how-to-analyze-a-document-using-form-recognizer" title="Direct link to heading">‚Äã</a></h2><p>Let‚Äôs see the code in action for Form Recognizer using their <a href="https://www.npmjs.com/package/@azure/ai-form-recognizer/v/4.0.0-beta.3" target="_blank" rel="noopener noreferrer">new JavaScript SDK</a>. You can start with your <a href="https://github.com/staticwebdev" target="_blank" rel="noopener noreferrer">choice of Static Web Apps templates</a> or add the code to your existing application.</p><p>We need to import the SDK objects and your environment variables:</p><div class="language-javascript codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-javascript codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports">    </span><span class="token imports maybe-class-name">AzureKeyCredential</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports">    </span><span class="token imports maybe-class-name">DocumentAnalysisClient</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports">    </span><span class="token imports maybe-class-name">DocumentField</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports">    </span><span class="token imports maybe-class-name">FormRecognizerApiVersion</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports">    </span><span class="token imports maybe-class-name">PrebuiltModels</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports"></span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@azure/ai-form-recognizer&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FORM_RECOGNIZER_KEY</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> endpoint </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FORM_RECOGNIZER_ENDPOINT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In your async callback function that starts the analysis, like a picture upload or click event callback, you will initialize the client object and poll until you have all the results from your analysis.</p><div class="language-javascript codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-javascript codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Analyze</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">DocumentAnalysisClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AzureKeyCredential</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> poller </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">beginAnalyzeDocument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;prebuilt-document&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> formUrl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> keyValuePairs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> entities </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> poller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pollUntilDone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//Do amazing things with the data.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Do something with the results, either sign in your user with their ID doc data or display the key value pairs to your user.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="deploy-your-app-to-swa">Deploy your app to SWA<a class="hash-link" href="#deploy-your-app-to-swa" title="Direct link to heading">‚Äã</a></h2><p>If you are using one of the SWA templates, all you need to do is push your code to share it with the word.</p><p>If you are not using a template, you can use the <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestaticwebapps" target="_blank" rel="noopener noreferrer">Azure Static Web Apps VS Code Extension</a> or <a href="https://github.com/Azure/static-web-apps-cli" target="_blank" rel="noopener noreferrer">SWA CLI</a> to <a href="https://docs.microsoft.com/azure/static-web-apps/deploy-nextjs?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">deploy your app to an</a> SWA resource.</p><p>If you have a lot of images and would like to batch process or if you are doing multiple things with your image, like detect objects, read the text in the image and translate, you might want to use a <a href="https://docs.microsoft.com/azure/azure-functions/?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">Azure Functions App</a>. Thankfully <a href="https://docs.microsoft.com/azure/static-web-apps/functions-bring-your-own?WT.mc_id=javascript-57623-ayyonet" target="_blank" rel="noopener noreferrer">creating and API for your Static Web App</a> is one of the features of the VSCode extension.
Check out my video for step by step instructions to deploy your SWA with Functions.</p><p><a href="https://youtu.be/VzML-6DClVU" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://img.youtube.com/vi/VzML-6DClVU/0.jpg" alt="How to add an API to your Azure Static Web App | Azure Tips and Tricks: Static Web Apps" class="img_E7b_"></a></p><p>I hope you are inspired to enhance your applications with Azure Applied AI or Cognitive Services. Checkout the <a href="https://aka.ms/MSBuild2022" target="_blank" rel="noopener noreferrer">Build AI talk</a> and <a href="https://github.com/Azure-Samples/papiro" target="_blank" rel="noopener noreferrer">demo</a> to see what else you can do with AI.</p><p><a href="https://youtu.be/L10-LnbXxEo" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://media.giphy.com/media/YSsOvebCkyeglsqsaQ/giphy.gif" alt="MS Build 2022 AI Session Demo" class="img_E7b_"></a></p><p><a href="https://twitter.com/AysSomething" target="_blank" rel="noopener noreferrer">Reach out to me on twitter</a> if you have questions, you want to share what you build or discuss your ideas.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="exercise">Exercise<a class="hash-link" href="#exercise" title="Direct link to heading">‚Äã</a></h2><p>Want to explore Azure Cognitive Service integrations with your Azure Static Web App? Try walking through one of these tutorials to get hands-on experience with development:</p><ul><li><a href="https://docs.microsoft.com/samples/azure-samples/js-e2e-client-cognitive-services/build-and-deploy-a-static-web-app-to-azure/?WT.mc_id=javascript-68057-ayyonet" target="_blank" rel="noopener noreferrer">Build and deploy a SWA to analyse images</a> - build a React application that analyzes an image using Azure Cognitive Services (Computer Vision) - deploy the app to Azure Static Web Apps.</li><li><a href="http://aka.ms/ws-customvision" target="_blank" rel="noopener noreferrer">Machine Learning With Custom Vision</a> - complete this workshop where you learn to build a model to detect dog breeds using the Custom Vision API, then deploy it to Azure Static Web Apps with an Azure Functions backend.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/swa">swa</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/30-days">30days</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/best-practices">best-practices</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/ai">AI</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/computer-vision">ComputerVision</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/cognitive-services">CognitiveServices</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about #24: Cognitive Services &amp; SWA" href="/blog/practices-cognitive-services"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/practices-cognitive-search">#23: Cognitive Search &amp; SWA</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-24T00:00:00.000Z" itemprop="datePublished">May 24, 2022</time> ¬∑ <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/diberry" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/diberry.png" alt="Dina Berry"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/diberry" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dina Berry</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Content Developer @Microsoft</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to <code>Week 4, Day 2</code> of <strong>#30DaysOfSWA</strong>!! </p><p>Yesterday, we kicked off &quot;Best Practices&quot; week by talking about the end-to-end developer experience. Key to this is the ability to seamlessly integrate relevant tools and services that enhance the user experience - without adding complexity to the developer workflow. Today, we&#x27;ll look at this in practice, by walking through a tutorial that integrates your Azure Static Web Apps deployed website with <strong>Azure Cognitive Search</strong> - allowing you to add custom search capability to your deployed web app in just a few steps.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-well-cover">What We&#x27;ll Cover<a class="hash-link" href="#what-well-cover" title="Direct link to heading">‚Äã</a></h2><ul><li>What is Azure Cognitive Search?</li><li>What is a Search Index?</li><li>Add Cognitive Search to a Website</li><li>Deploy to Azure Static Web Apps</li><li><strong>Exercise</strong>: Create your own search index. Deploy your app to SWA.</li></ul><p><img loading="lazy" src="/assets/images/23-banner-7829400df111a8a2022e6a411ac66aec.png" width="1000" height="420" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="make-your-app-searchable">Make Your App Searchable!<a class="hash-link" href="#make-your-app-searchable" title="Direct link to heading">‚Äã</a></h2><p>Today we explore adding search to a website with <a href="https://docs.microsoft.com/en-us/azure/search/search-what-is-azure-search" target="_blank" rel="noopener noreferrer">Azure Cognitive Search</a> - a cloud search service that provides infrastructure, APIs, and tools, for building rich integrated search capabilities for your mobile and web applications. It even allows for custom search functionality to enhance the default experience.</p><p>We&#x27;ll walk through the following example today. Want to follow along? You can <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/search-website/" target="_blank" rel="noopener noreferrer">grab the source code</a> and explore it as we walk through the tutorial.</p><p>We will be using a <strong>Book Catalog</strong> example - one of the most common uses of search for a website - to demonstrate how fast it is to get this service up and running with your deployed Azure Static Web App.</p><p><img loading="lazy" alt="Sample with Cognitive Search functionality" src="/assets/images/cognitive-search-enabled-book-website-02bb16800c27a094125a915451aa099a.png" width="1503" height="682" class="img_E7b_"></p><p>This sample website provides access to a catalog of 10,000 books. The user experience goes something like this:</p><ul><li>The user searches the catalog by entering text in the search bar. </li><li>As they enter text, we can use the Search Index&#x27;s suggest feature to complete the text proactively. </li><li>Once the query finishes, we display the results with a subset of details. </li><li>Users select a book to see the details stored in the book&#x27;s Search Index.</li></ul><p>Simple, right? Let&#x27;s look under the hood at how this works, and then dive into the implementation details.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-is-azure-cognitive-search">What is Azure Cognitive Search?<a class="hash-link" href="#what-is-azure-cognitive-search" title="Direct link to heading">‚Äã</a></h2><p><a href="https://docs.microsoft.com/en-us/azure/search/search-what-is-azure-search" target="_blank" rel="noopener noreferrer">Azure Cognitive Search</a> is a cloud search service that gives you, as the developer, the ability to provide rich search experiences. Architecturally, a search service sits between the external data stores that contain your unindexed data, and your client app that sends query requests to a search index and handles the response.</p><p><img loading="lazy" alt="the roundtrip road of boring development" src="/assets/images/azure-search-diagram-f9a574f0bbffddfff49e59ec0e7a37dc.svg" width="820" height="153" class="img_E7b_"></p><p>Cognitive Search <strong>can integrate with other Azure services</strong> that automate data ingestion/retrieval from Azure data sources, and skillsets that incorporate consumable AI from Cognitive Services, such as image and natural language processing, or custom AI that you create in Azure Machine Learning or wrap inside Azure Functions.</p><p>Once you create your Azure resource for Cognitive Search, you can access it with the following key information:</p><ul><li><strong>Resource name:</strong> what you named your Cognitive Search instance.</li><li><strong>Index name:</strong> your resource can hold many indexes, each with its own identifiable name.</li><li><strong>Admin key:</strong> used to upload data into the search index</li><li><strong>Query key:</strong> used by the API to find data in the search index</li></ul><p>So, we&#x27;ve used the term <em>search index</em> many times - what does that mean?</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-is-a-search-index">What is a search index?<a class="hash-link" href="#what-is-a-search-index" title="Direct link to heading">‚Äã</a></h2><p>Search functionality needs data to query. In Azure Cognitive Search, this data is held in a <em>search index</em>. Because this particular sample is already written for you, it includes the upload of the JSON data into the search index. If you&#x27;re starting from scratch, look at the <a href="https://docs.microsoft.com/en-us/azure/search/search-get-started-portal" target="_blank" rel="noopener noreferrer">Quickstart</a> to learn how you can create an Azure Cognitive Search index with <strong>your</strong> data.</p><p>The trickiest part is mapping your data into Cognitive Search types. In order to do this, you provide a <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/search-website/bulk-insert/good-books-index.json" target="_blank" rel="noopener noreferrer">schema file</a> that describes each data field. </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="searchable-title">Searchable title<a class="hash-link" href="#searchable-title" title="Direct link to heading">‚Äã</a></h3><p>An example of a field in the schema file for this book catalog is the book title:</p><div class="language-json codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-json codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;title&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Edm.String&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;facetable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;filterable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;key&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;retrievable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;searchable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;sortable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;analyzer&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;standard.lucene&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;indexAnalyzer&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;searchAnalyzer&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;synonymMaps&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <strong>type</strong> is a <code>Edm.String</code> and it uses the <code>standard.lucene</code> <strong>analyzer</strong>. It is searchable and retrievable (comes back in the query results).</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="filter-by-language">Filter by language<a class="hash-link" href="#filter-by-language" title="Direct link to heading">‚Äã</a></h3><p>The book catalog search also allows a filter by language. This filter, known as a facet, is provided by the <strong>facetable</strong> property.</p><div class="language-json codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-json codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;language_code&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Edm.String&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;facetable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;filterable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;key&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;retrievable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;searchable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;sortable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;analyzer&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;indexAnalyzer&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;searchAnalyzer&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;synonymMaps&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;fields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="suggest-search-terms-as-a-user-types">Suggest search terms as a user types<a class="hash-link" href="#suggest-search-terms-as-a-user-types" title="Direct link to heading">‚Äã</a></h3><p>The schema also tells the search index what fields to watch when providing search <strong>suggesters</strong>, as the user types an entry in the search box. For this sample, suggestions are based on author names and book titles.</p><div class="language-json codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-json codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;suggesters&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sg&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;searchMode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;analyzingInfixMatching&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;sourceFields&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;authors&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;original_title&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the search index is created with data, you can view the data in the Visual Studio Code extension for Cognitive Search.</p><p><img loading="lazy" alt="Search index viewed with VS Code extension" src="/assets/images/visual-studio-code-search-extension-view-docs-1ee0d82da81abed12fb98bdf68f1fcc8.png" width="1329" height="794" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="add-search-to-website">Add search to website<a class="hash-link" href="#add-search-to-website" title="Direct link to heading">‚Äã</a></h2><p>After the search index is created with the data, you can add search functionality through the UI. Your UI passes the user&#x27;s search request to your API. The API queries the search index and returns the results. </p><p>The <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/search-website/src" target="_blank" rel="noopener noreferrer">client code</a> provides interactive functionality:</p><ul><li>Provides <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/search-website/src/components/SearchBar/SearchBar.js" target="_blank" rel="noopener noreferrer">Search component</a><ul><li>Provides <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/search-website/src/components/SearchBar/Suggestions/Suggestions.js" target="_blank" rel="noopener noreferrer">suggestions</a> from the API as the user types in the search box</li><li><a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/search-website/src/components/Facets/Facets.js" target="_blank" rel="noopener noreferrer">Filters the results</a> when the user selects or deselects from a list of filters (facets).</li></ul></li><li>Provides <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/search-website/src/components/Results/Results.js" target="_blank" rel="noopener noreferrer">results component</a>, possibly <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/search-website/src/components/Pager/Pager.js" target="_blank" rel="noopener noreferrer">paging</a>. </li></ul><p>The <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/tree/master/search-website/api" target="_blank" rel="noopener noreferrer">serverless code</a> provides the following API to respond to client requests:</p><ul><li><a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/search-website/api/Search/index.js" target="_blank" rel="noopener noreferrer">Search</a> the catalog</li><li>Provide <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/search-website/api/Suggest/index.js" target="_blank" rel="noopener noreferrer">suggestions</a></li><li>Get <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/tree/master/search-website/api/Lookup" target="_blank" rel="noopener noreferrer">specific item&#x27;s</a> data</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="deploy-to-swa">Deploy to SWA<a class="hash-link" href="#deploy-to-swa" title="Direct link to heading">‚Äã</a></h2><p>The sample is deployed to SWA from a GitHub action, created for you by the Visual Studio Code extension for SWA.</p><p>Once you create and deploy the sample, you need to set environment variables to connect from the serverless API to your Cognitive Search resource. Then the book catalog website is available and searchable. </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="exercise-upload-data-to-search-index">Exercise: Upload data to search index<a class="hash-link" href="#exercise-upload-data-to-search-index" title="Direct link to heading">‚Äã</a></h2><ol><li><p><a href="https://docs.microsoft.com/azure/search/tutorial-javascript-overview#fork-and-clone-the-search-sample-with-git" target="_blank" rel="noopener noreferrer">Fork the GitHub sample repo</a>, and clone it to your local computer. This is a necessary step because the GitHub action needs to be written to a repo your user account has access to.</p></li><li><p><a href="https://docs.microsoft.com/azure/search/tutorial-javascript-overview#create-a-resource-group-for-your-azure-resources" target="_blank" rel="noopener noreferrer">Create a resource group</a> to hold both your SWA and Cognitive Search resources.</p></li><li><p><a href="https://docs.microsoft.com/azure/search/tutorial-javascript-create-load-index#create-an-azure-search-resource" target="_blank" rel="noopener noreferrer">Create a search index</a> in Visual Studio Code with the Cognitive Search extension.  </p></li><li><p><a href="https://docs.microsoft.com/azure/search/tutorial-javascript-create-load-index#create-an-azure-search-resource" target="_blank" rel="noopener noreferrer">Get the admin key</a>. </p></li><li><p><a href="https://docs.microsoft.com/azure/search/tutorial-javascript-create-load-index#prepare-the-bulk-import-script-for-search" target="_blank" rel="noopener noreferrer">Set admin key and resource name</a> in sample&#x27;s bulk_insert_books.js script. </p></li><li><p>Don&#x27;t check in these changes with git. You don&#x27;t want these secrets in your public fork.</p></li><li><p><a href="https://docs.microsoft.com/azure/search/tutorial-javascript-create-load-index#run-the-bulk-import-script-for-search" target="_blank" rel="noopener noreferrer">Install dependencies and bulk insert data</a> in the <code>./bulk-insert</code> folder:</p><div class="language-javascript codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-javascript codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">npm install </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> npm start</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Your search index is ready to answer search queries.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="exercise-deploy-swa-to-azure">Exercise: Deploy SWA to Azure<a class="hash-link" href="#exercise-deploy-swa-to-azure" title="Direct link to heading">‚Äã</a></h2><ol><li><p>In Visual Studio Code, <a href="https://docs.microsoft.com/azure/search/tutorial-javascript-deploy-static-web-app#create-a-static-web-app-in-visual-studio-code" target="_blank" rel="noopener noreferrer">create the SWA resource</a>. This process adds a GitHub action YAML file to your fork and deploys that version to your SWA resource.</p><p>At this point, the website should be available, but search isn&#x27;t connected yet.</p></li><li><p><a href="https://docs.microsoft.com/azure/search/tutorial-javascript-deploy-static-web-app#get-cognitive-search-query-key-in-visual-studio-code" target="_blank" rel="noopener noreferrer">Get the query key</a> for your search index. Your API needs these secrets (query key and Cognitive Search resource name), to answer queries from your serverless API.</p></li><li><p><a href="https://docs.microsoft.com/azure/search/tutorial-javascript-deploy-static-web-app#add-configuration-settings-in-azure-portal" target="_blank" rel="noopener noreferrer">Set the secrets</a> for your serverless API in the Azure portal. </p><p>Search is now connected from your API to your Cognitive Search index.</p></li><li><p><a href="https://docs.microsoft.com/azure/search/tutorial-javascript-deploy-static-web-app#use-search-in-your-static-web-app" target="_blank" rel="noopener noreferrer">Use your search-enabled website</a> to find a book. </p></li><li><p>Type <em>slowly</em> to see the suggestions based on what you enter.</p></li><li><p>Filter the results to a different language. </p></li><li><p>Select a book to see all its details. </p></li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">‚Äã</a></h2><ul><li>Make sure you used the <strong>admin key</strong> in the upload file.</li><li>Make sure you used the <strong>query key</strong> in the SWA config. </li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="next-steps">Next steps<a class="hash-link" href="#next-steps" title="Direct link to heading">‚Äã</a></h2><p>This website provides basic search functionality for books. Go beyond the basics with:</p><ul><li><a href="https://docs.microsoft.com/en-us/azure/search/speller-how-to-add" target="_blank" rel="noopener noreferrer">Spell check</a></li><li><a href="https://docs.microsoft.com/en-us/azure/search/search-query-fuzzy" target="_blank" rel="noopener noreferrer">Fuzzy search</a></li><li><a href="https://docs.microsoft.com/en-us/azure/search/semantic-ranking" target="_blank" rel="noopener noreferrer">Semantics</a></li></ul><p>This is just one of many samples provided in the <a href="https://docs.microsoft.com/en-us/azure/developer/javascript/how-to/create-static-web-app" target="_blank" rel="noopener noreferrer">Azure for JavaScript Developers</a> page. Explore the Static Web Apps section and explore other Azure services you can integrated into your modern web app!</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/swa">swa</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/30-days">30days</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/best-practices">best-practices</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about #23: Cognitive Search &amp; SWA" href="/blog/practices-cognitive-search"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/practices-e2e">#22: E2E Development &amp; SWA</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-23T00:00:00.000Z" itemprop="datePublished">May 23, 2022</time> ¬∑ <!-- -->17 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/anfibiacreativa" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/anfibiacreativa.png" alt="Natalia Venditto"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/anfibiacreativa" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Natalia Venditto</span></a></div><small class="avatar__subtitle" itemprop="description">Principal Program Manager @Microsoft</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to <code>Week 4, Day 1</code> of <strong>#30DaysOfSWA</strong>!! </p><p>This kickstarts our <strong>&quot;Best Practices&quot;</strong> week where we&#x27;ll explore additional topics that help up deliver an enhanced or more optimal modern web application experience to our users. We&#x27;ll start by looking at the End-to-End <em>developer experience (DX)</em> - the importance of having a smooth and seamless DX to complement the UX (user experience), and best practices to improve your developer experience by architecting your applications and integrating services in more effective ways. Let&#x27;s dive in!</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>What We&#x27;ll Cover</h5></div><div class="admonition-content"><ul><li>What is an end-to-end developer experience (DX)?</li><li>What are core DX components when building and deploying static web apps?</li><li>How can we improve DX implementing best practices?</li><li>How can we create an architecture matrix to guide E2E DevEx?</li><li><strong>Exercise</strong>: Try to reproduce the architecture seen below!</li></ul></div></div><p><img loading="lazy" src="/assets/images/22-banner-c5cc6f06159eb61034c900af02756c3a.png" width="1000" height="420" class="img_E7b_"></p><p>Today we explore the importance of a great development experience and how can you improve yours, when building and deploying your static web applications using Azure Static Web Apps!</p><p>I admit it took me some time to write this post. It would have been much easier for me to write about a specific topic with code examples and technical definitions, than describing what developer experience means to me.</p><p>The definition of developer experience, like anything else you <em>experience</em>, is subjective. It has a lot of you, in it. It changes with you, and the context you&#x27;re a part of. Things like <em>how long you&#x27;ve been in the business</em> or <em>what type of software you work on</em>, or <em>where do you deploy it</em>, will all impact your perception of an experience.</p><p>So how to put it in words? How to define it and scope it? </p><p>It&#x27;s impossible for me to do it in a way that feels relatable to everyone. I can only explain it, from the perspective inferred by my needs and my perception of the outcome, as an individual developer, and how it impacts my vision and my work. </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="predictability">Predictability<a class="hash-link" href="#predictability" title="Direct link to heading">‚Äã</a></h2><p>Let me start by saying that in my personal life, when I think of memorable experiences, a lot of them have been the consequence of an impulse. A spontaneous act. In my personal life, I am not much of a planner. I am the kind of person that wakes up every Saturday morning and declares &quot;We are going somewhere far away this weekend!&quot;. And my husband (who is all the contrary from me and needs a lot of structure!) will ask questions like:</p><ul><li>Ok, where do you wanna go? </li><li>Have you booked a hotel? </li><li>Do you know where we will have lunch? </li></ul><p>And I would invariably respond: &quot;I don&#x27;t care! Let&#x27;s just hop in the car, drive somewhere and figure it all out on the way there!&quot;. That&#x27;s because I think that experimenting and experiencing, go hand in hand, when it comes to adventure. And the actual <em>way there</em>, is part of the fun.</p><blockquote><p><strong>At work, however, I like predictability.</strong> </p></blockquote><p>I like structure, repeatability, patterns &amp; conventions. I appreciate having a framework, an opinion others agree with so I&#x27;m on the same page with my team. And I like all this because it oftentimes leads to quick results and success.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="a-road-analogy">A Road Analogy<a class="hash-link" href="#a-road-analogy" title="Direct link to heading">‚Äã</a></h2><p>Experiences are like roads. They can take you places -- or not. And to me, <strong>development experiences are just like the roads we travel on</strong>:</p><ul><li>They have milestones - so I can measure progress.</li><li>They have multiple lanes - so I have flexibility.</li><li>They have entry and exit ramps - so I can change paths quickly. </li><li>They have destinations - so I know I&#x27;m getting somwhere specific.</li></ul><p>When I first got into web development, there were a fewer types of roads. Most were linear and slow, particularly when it came to frontend development. You needed repeated round-trips to the same server, just to get something to render on a page.</p><p><img loading="lazy" alt="the roundtrip road of boring development" src="/assets/images/swaF1-2f10c6d9065a83c8c963ec50a95e9c2e.png" width="2120" height="1181" class="img_E7b_"></p><p>By contrast, today we&#x27;re speeding along multi-lane freeways with numerous twists and turns, interconnecting roads, and possibilities (<a href="https://dev.to/azure/04-configuring-static-web-apps-2oa7" target="_blank" rel="noopener noreferrer">aka configurations</a>) to choose from. To reach a destination, you may have to use ramps to connect two different roads - similar to how we connect tow different services <a href="https://dev.to/azure/03-api-enabling-static-web-apps-25kh" target="_blank" rel="noopener noreferrer">via an API</a>. </p><p><img loading="lazy" alt="more lanes, more connectivity, more fun, more speed" src="/assets/images/swaF3-c85e864b2af858458f7034a071d45127.png" width="3331" height="1244" class="img_E7b_"></p><p>If we continue with this analogy, then <strong>a bad development experience is like poor road planning or construction</strong>:</p><ul><li>the road is old, bumpy, cracked</li><li>the signposts are few and far between, giving the user insufficient time to process and follow instructions. </li><li>if you miss an exit, you may have to travel a long distance before you have the opportunity to turn around</li><li>there may be no way to access a desired road from another one - no exit or entry ramps at all!</li><li>if your car breaks down, or your run out of fuel - there may not be service stations nearby to for refill or recharge.</li><li>or you may find a station, but you have no idea of the cost of refill or recharge before you commit to taking that exit.</li><li>there may not be any way to get food or drinks for many miles.</li></ul><p>You can probably guess how these travel constraints map onto poor developer experiences, but let&#x27;s spell it out:</p><ul><li>having to slow down due to infrastructure conditions</li><li>feeling like you&#x27;re not making any progress</li><li>having the certainty that your application quality is degrading due the environment and lack of resources or support, resulting in technical debt</li><li>not having the ability to <a href="https://dev.to/azure/05-securing-static-web-apps-5fe3" target="_blank" rel="noopener noreferrer">secure your implementation</a></li><li>not finding the right, complete or fresh documentation to help you understand the best path</li><li>not having the right SDK&#x27;s, API methods, or means of integrating your app to other software, to accomplish simple or more complex tasks, like authentication, storage, content authoring <a href="https://dev.to/azure/12-headless-cms-swa-built-with-blazor-1e2d" target="_blank" rel="noopener noreferrer">with a headless CMS</a> or setting up your CI/CD pipeline</li><li>not having the right tools to <a href="https://dev.to/azure/02-building-static-web-apps-2j72" target="_blank" rel="noopener noreferrer">build</a>, <a href="https://dev.to/azure/07-deploying-static-web-apps-48e" target="_blank" rel="noopener noreferrer">deploy</a>, optimize, <a href="https://dev.to/azure/06-previewing-static-web-apps-4p36" target="_blank" rel="noopener noreferrer">preview</a>, monitor or speed up your processes</li><li>not being able to scale or not being sure how much it will cost you</li><li>not having fun, as you go</li></ul><p><strong>Because, let&#x27;s face it: developing should be a fun experience. And for that you need the right vehicle, the right infrastructure, and a plan.</strong>
And when you lack all that, it&#x27;s like riding a Lamborghini across a sandy desert.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>WHAT WE CAN CONCLUDE</h5></div><div class="admonition-content"><p>Is that developer experience refers to the entirety of physical, emotional and cognitive experiences of an individual while using a tool or technology to complete a software development task. It can equate to suffering (when bad), enduring (when fustrating or neutral), or to feeling pleasure and delight (when great).</p></div></div><p><img loading="lazy" alt="The right infrastructure, capabilities and resources, to support the right architecture" src="/assets/images/swaF4-0bd6686927cf3493451a953651fd6b0e.png" width="3169" height="1299" class="img_E7b_"></p><p>Making the right architecture and technology decisions, will definitely impact the outcome. And we can only make those decisions right, when we ask the right questions.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="architecture-what-core-infrastructure-capabilities-and-resources-do-we-need">Architecture: What core infrastructure, capabilities and resources do we need?<a class="hash-link" href="#architecture-what-core-infrastructure-capabilities-and-resources-do-we-need" title="Direct link to heading">‚Äã</a></h2><p>As we hope you have learned from following this <a href="https://dev.to/azure/kicking-off-30daysofswa-2d8g" target="_blank" rel="noopener noreferrer">30 days of Static Web Apps</a>, it is a dedicated offering for frontend developers working with SPA&#x27;s and Static Generated websites. We continue to work to extend its capabilities, and support more frameworks and use cases.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="documentation-should-be-fresh--relevant">Documentation: Should be fresh &amp; relevant!<a class="hash-link" href="#documentation-should-be-fresh--relevant" title="Direct link to heading">‚Äã</a></h3><p>When thinking about those milestones that should hit along the road of a great end-to-end developer experience, we are working hard to make sure you always find complete and fresh documentation to help you get started and know all the possibilities you have with Static Web Apps, upfront, and to keep supporting you with relevant documentation and content as your applications grow.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="workflows-building-blocks--seamless-integrations">Workflows: Building blocks &amp; seamless integrations!<a class="hash-link" href="#workflows-building-blocks--seamless-integrations" title="Direct link to heading">‚Äã</a></h3><p>Not only have we been working to offer an intuitive user interface at the Azure portal itself. We have been very intentional at the time of making sure integration with the <a href="https://dev.to/azure/15-develop-with-azure-tools-3h47" target="_blank" rel="noopener noreferrer">tools</a>, and platforms frontend developers know, use and love, like GitHub and VS Code, is seamless. </p><p>Static Web Apps automatically pushes a GitHub actions workflow file as you generate the application as a resource, and you can create it from the portal, if you prefer a UI guided experience, but also without ever leaving your favorite code editor, by installing the <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestaticwebapps" target="_blank" rel="noopener noreferrer">official extension</a>!</p><p>And if you prefer a command line experience, you can use the brand new Static Web Apps CLI, with extended support to login to Azure, create, build and deploy apps, and a local emulator, so you can test your apps before you ever deploy to the cloud.</p><p>Creating your static web applications and configuring your pipelines, has never been this easy!</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="efficient--versatile-serverless--containerized-apis">Efficient &amp; Versatile: Serverless + Containerized APIs<a class="hash-link" href="#efficient--versatile-serverless--containerized-apis" title="Direct link to heading">‚Äã</a></h3><p>Because we recognize that the use cases for Jamstack and JavaScript full-stacks applications in general are becoming more and more complex, part of our strategy for a delightful end-to-end development experience relies on the simplification and standarization of mechanisms for API integration, via serverless functions through industry compliant patterns and via our super efficient devkits.</p><p>And that includes a concern that has historically been a challenge for frontend developers: the integration with databases and data storage. Azure Static Web Apps is unique in that it integrates very well with our CosmosDB database, a versatile cloud database that offers different API&#x27;s to meet different developer skills and server a myriad of use cases in a very effective way.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="security--performance-e2e-testing--debugging">Security &amp; Performance: E2E testing + debugging<a class="hash-link" href="#security--performance-e2e-testing--debugging" title="Direct link to heading">‚Äã</a></h3><p>And when we go to the service station, it may be a good time to check our oil levels, air pressure and wipe our window panes. And what a better way to do it than with tools from the same developer ecosystem and that play right (yes, you got me! I&#x27;m playing with words now!) like <a href="https://dev.to/azure/16-test-automation-with-playwright-odk" target="_blank" rel="noopener noreferrer">Playwright</a> and Edge Developer Tools. </p><p>So now when you use the newly release Preview environments, to test development from a specific staging branch, you will have also the ability to integrate with best-in-class tooling, iteration after iteration, until feature complete.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="alignment-the-ultimate-e2e-roadmap-should-map-to-the-development-cycle">Alignment: The ultimate e2e roadmap should <em>map</em> to the development cycle<a class="hash-link" href="#alignment-the-ultimate-e2e-roadmap-should-map-to-the-development-cycle" title="Direct link to heading">‚Äã</a></h2><p>Any aspect on its own, can describe an end-to-end experience. For instance:</p><ul><li>If I want to secure my app against unauthorized access, I must implement identity. That&#x27;s an E2E experience.</li><li>If I want to persist data, I&#x27;ll need to integrate with a database. An E2E experience.</li><li>If I want to integrate third-party services on demand, I&#x27;ll need event-driven functions. Another E2E experience.</li></ul><p>The ultimate end-to-end experience, however, is that that encompasses all components described by a matrix of architecture definitions and best practices,  mapping to the software development cycle itself.</p><p><img loading="lazy" alt="development roadmap equals cycle" src="/assets/images/SWAF5-bb8f52ffabf09a08d7f08a8f53f4463c.png" width="2283" height="1598" class="img_E7b_"></p><p>When we are in the system design phase for our application, we will start thinking about what in research is known as &quot;Jobs to be Done&quot;, and materialize them or <em>get them done</em> , using tools or integrating with other products or services.</p><p> <strong>Setup phase</strong>.
Job to be done will be generic - &quot;I need to build a static web app. </p><ul><li>What do I need? =&gt; I need a framework.</li><li>What does the framework require =&gt; It&#x27;s a JS framework that runs in the browser, or in a Node.js runtime. I need a node environment and a node package manager to manage dependencies. </li><li>Selected framework has its own CLI =&gt; I need it to optimize it and build it. </li><li>I want to version it, so I need a version control tool. To collaborate, I need to host that code in a central, remote location (aka version control hosting). </li><li>And because we want to build it remotely each time we integrate with a CI/CD pipeline, that includes a runner and some virtualization or emulation. - And we want to publish it, so I need a hosting service. </li><li>And...&quot;_</li></ul><p>And those are the <em>requirements</em> that we start mapping to <em>setup and service capabilities</em>, so we can put together local and remote environments capable to fulfill them.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="welcome-to-the-matrix">Welcome to the matrix<a class="hash-link" href="#welcome-to-the-matrix" title="Direct link to heading">‚Äã</a></h2><p>So let&#x27;s do together an exercise of architecture definitions based out of developer <em>jobs to be done</em>, classifying them by the milestone we defined in the previous graphic. As a bonus, we will map them to a requirement, that can be a business requirement, a developer job to be done, or an end user story.</p><p>The matrix will be roughly based on the high-level diagram below:</p><p><img loading="lazy" alt="static web app high level architecture diagram" src="/assets/images/swaF6-650f434fb7606309668b8cc10cb640ee.png" width="3374" height="2411" class="img_E7b_"></p><table><thead><tr><th>Job to be done</th><th>Product/Service</th><th>Phase</th><th>Requirement</th></tr></thead><tbody><tr><td>As a developer, I want to use the tools I am familiar with, to code, build and deploy my Jamstack (Statically Generated) applications</td><td>VS Code / SWA CLI</td><td>Setup</td><td>As an end-user, I want to be able to access an online catalogue of products with their respective detail pages</td></tr><tr><td>As a developer, I want to connect my remote repository where I collaborate with other team members, to the service I will be deploying my app to</td><td>GitHub / VS Code / Static Web Apps*</td><td>Setup</td><td>As a business owner, I want the code and secrets for my e-commerce platform to be stored safely</td></tr><tr><td>As a developer, I want to setup a CI/CD pipeline, for remote collaboration and fast/agile integration</td><td>GitHub Actions Static Web Apps</td><td>Setup</td><td>As a content author, I want to see the new content published when I submit it to the content authoring tool, without any additional manual work</td></tr><tr><td>As a developer, I want to integrate with a database to store content and assets</td><td>CosmosDB<em>‚Ä† / Azure Functions</em>‚Ä† / Static Web Apps*</td><td>Implementation or Integration</td><td>As a business owner I want all assets and information to stored safely and versioned</td></tr><tr><td>As a developer, I want to integrate with a (headless) CMS for 3rd party content authoring</td><td>Azure Functions<em>‚Ä† / Static Web Apps</em></td><td>Implementation or Integration</td><td>As a content author, I want to see the new content published when I submit it to the content authoring tool</td></tr><tr><td>As a developer, I want to trigger the CI/CD workflows via custom/scheduled events</td><td>GitHub Actions* / Durable Functions**</td><td>Integration</td><td>As a business owner, I want my teams to automate the process of building and deploying new code or content so we can achieve optimal time-to-value</td></tr><tr><td>As a developer, I want to secure my implementation to make sure requests to our service come from my application</td><td>Indentity Platform‚Ä†</td><td>Implementation or Integration</td><td>As a business owner, I want to make sure our e-commerce tool is secure and compliant with laws and regulations</td></tr><tr><td>As a developer, I want to restrict access to certain pages to users with a certain role</td><td>Identity Platform‚Ä†</td><td>Implementation or Integration</td><td>As an end user, I want to keep a private profile with my payment methods and other PII</td></tr><tr><td>As a developer, I want to localize the UI to several different languages</td><td>Cognitive Services*‚Ä†</td><td>Implementation or Integration</td><td>As an end user, I want to access content in my own language</td></tr><tr><td>As a developer, I want to personalize recommendations in dynamic pages</td><td>Cognitive Services*‚Ä†</td><td>Implementation or Integration</td><td>As an end user, I want to have recommendations that are relevant to me</td></tr><tr><td>As a developer, I want to integrate with a 3rd party payment platform</td><td><em>3rd party</em> / Azure Functions*</td><td>Implementation or Integration</td><td>As a business owner, I want payments processed by a reliable 3rd party provider</td></tr><tr><td>As a developer, I want to preview and debug changes before I promote them to production</td><td>Static Web Apps Preview/Edge Developer Tools</td><td>Build/Deploy/Testing</td><td>As a business owner, I want to preview changes before they go live</td></tr><tr><td>As a developer, I want to reduce technical debt by implementing an e2e test automation suite</td><td>Playwright / GitHub Actions</td><td>Testing</td><td>As an end user, I want the user interface to respond quickly and accurately, when I interact with it</td></tr><tr><td>As a developer, I want to be able to publish my application to the web</td><td>Static Web Apps</td><td>Build/Deploy</td><td>As a business owner, I want my application to be accessible by web users from all parts of the world, with the least possible latency</td></tr><tr><td>As a developer, I want to enable a mechanism for the application to be accessible via a distributed network</td><td>Azure Front Door</td><td>Setup/Integration</td><td>As a user I want web pages I visit, to load very fast</td></tr><tr><td>As a developer I want to integrate with analytics tools, to share data with stakeholders</td><td>Static Web Apps / App Insights</td><td>Setup/Testing</td><td>As a business owner, I want to know what products are being queried the most to understand market trends</td></tr></tbody></table><p>(*)Expresses the ability to operate directly from the VS Code context via an extension, or locally with the CLI capability
(‚Ä†) Expresses the existence of an SDK to accelerate and secure the implementation</p><blockquote><p><strong>As we can see, you don&#x27;t need to be part of a massive organization or a large, distributed team, to implement certain workflows and give structure to your own development cycles in process, to gain in developer productivity and delightful experiences.</strong></p></blockquote><p>Writing down your own matrix as you start, and extending it as your application scales and has extended requirements, can help you better organize yourself, make sure you&#x27;re implementing best practices, and even evaluate tools and technologies to make sure you&#x27;re on the right, most optimal path.</p><p>Static Web Apps is a modern, low configuration capability for Jamstack development, that offers you a myriad of satellite integrations, for free! And it has the advantage of growing with you, should you need more capacity, more tools, or even a full migration.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="to-wrap-this-up">To wrap this up...<a class="hash-link" href="#to-wrap-this-up" title="Direct link to heading">‚Äã</a></h2><p>Developer Experience is an end-to-end exercise that can be connected to the development, implementation and/or integration of a single feature or a group of them, from design, to execution, to testing, to release. </p><p>In order for developers to have a <em>great</em> experience they enjoy, from one end to the other, they need to find:</p><ul><li>guidelines that help them define a problem they can design an effective solution</li><li>technologies that are compatible as building blocks for it</li><li>complete, accurate and fresh documentation to support at all times</li><li>tools that simplify the <em>jobs to be done</em> or tasks, individual and collective (to a single developer or a team of them)</li><li>underlying mechanisms (exposed to the developer or not depending on their wishes or needs), for effectual program compilation, transpilation, testing, deployment and execution (such as runtimes and pipelines)</li><li>definitions and hooks for integration (with other technologies) or and migration (to other technologies)</li></ul><p>When all those, and some more, are fulfilled, developers become more productive, focused, and can spend their time doing what they love, instead of wasting it in undifferentiated tasks.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="exercise">Exercise<a class="hash-link" href="#exercise" title="Direct link to heading">‚Äã</a></h2><p>Try to reproduce the architecture seen above! Most of the integrations are available to the free tier! Show us how far you got!</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/swa">swa</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/30-days">30days</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/best-practices">best-practices</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about #22: E2E Development &amp; SWA" href="/blog/practices-e2e"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/devtools-vscode">#21: Develop With VSCode</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-22T00:00:00.000Z" itemprop="datePublished">May 22, 2022</time> ¬∑ <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/alexweininger" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/alexweininger.png" alt="Alex Weininger"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/alexweininger" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Alex Weininger</span></a></div><small class="avatar__subtitle" itemprop="description">Developer @Microsoft, for @code and @Azure</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to <code>Week 3, Day 7</code> of <strong>#30DaysOfSWA</strong>!! </p><p>This week has been all about the SWA developer tools. To conclude the week, we&#x27;ll show how the <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestaticwebapps" target="_blank" rel="noopener noreferrer">Azure Static Web Apps extension for VS Code</a> can make using all of these awesome tools easier!</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>WHAT WE&#x27;LL COVER TODAY</h5></div><div class="admonition-content"><ul><li>Debugging with VS Code</li><li>Easily add an API endpoint</li><li>Debug API and Frontend simultaneously</li><li><strong>Resource(s):</strong> <a href="https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=vanilla-javascript" target="_blank" rel="noopener noreferrer">Azure Static Web Apps Quickstart: With VS Code</a></li></ul></div></div><p><img loading="lazy" src="/assets/images/21-banner-4c8833d85f3b63b56f65329fd492dcb5.png" width="1000" height="420" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="prerequisites-Ô∏è">Prerequisites üõ†Ô∏è<a class="hash-link" href="#prerequisites-Ô∏è" title="Direct link to heading">‚Äã</a></h2><ol><li><p><strong>Google Chrome installed</strong> - we make use of the debugger</p></li><li><p><strong>Azure Static Web Apps extension for VS Code</strong> - <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestaticwebapps" target="_blank" rel="noopener noreferrer">View on Marketplace</a></p></li><li><p><strong>Azure Static Web Apps CLI</strong> - <a href="https://github.com/Azure/static-web-apps-cli" target="_blank" rel="noopener noreferrer">View on GitHub</a></p></li></ol><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">npm install -g @azure/static-web-apps-cli@latest</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="1-getting-started-">1. Getting started üü¢<a class="hash-link" href="#1-getting-started-" title="Direct link to heading">‚Äã</a></h2><ol><li>Clone one of these repositories, and open it up in VS Code</li></ol><table><thead><tr><th>Framework</th><th>Repository</th></tr></thead><tbody><tr><td>Angular</td><td><a href="https://github.com/staticwebdev/angular-basic" target="_blank" rel="noopener noreferrer">https://github.com/staticwebdev/angular-basic</a></td></tr><tr><td>React</td><td><a href="https://github.com/staticwebdev/react-basic" target="_blank" rel="noopener noreferrer">https://github.com/staticwebdev/react-basic</a></td></tr><tr><td>Svelte</td><td><a href="https://github.com/staticwebdev/svelte-basic" target="_blank" rel="noopener noreferrer">https://github.com/staticwebdev/svelte-basic</a></td></tr></tbody></table><ol start="2"><li>Run <code>npm install</code></li></ol><p><img loading="lazy" src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/c00m73mzlt49kkwl4iiw.png" alt="Running npm install in VS Code" class="img_E7b_"></p><blockquote><p>Theme: <a href="https://marketplace.visualstudio.com/items?itemName=wesbos.theme-cobalt2" target="_blank" rel="noopener noreferrer">Cobalt2 Theme Official by Wes Bos</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="2-run-and-debug-">2. Run and debug üêû<a class="hash-link" href="#2-run-and-debug-" title="Direct link to heading">‚Äã</a></h2><p><img loading="lazy" src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/pahznac0f8cjqt8haifb.png" alt="Show automatic debug configurations" class="img_E7b_"></p><ol><li>Go to the &quot;Run and Debug&quot; view</li><li>Click &quot;Show all automatic debug configurations.&quot;</li><li>In the dropdown, select &quot;Azure Static Web Apps...&quot;</li><li>Select the app you want to debug</li></ol><p>This will start the Azure Static Web Apps CLI in the VS Code terminal, and launch the Chrome debugger on <code>http://localhost:4280</code>.</p><p>Now you can set and hit breakpoints in your frontend code. </p><p><img loading="lazy" src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aprutdzi9opkbegdnf2p.png" alt="Set breakpoints" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="3-add-api-route-Ô∏è">3. Add API route ‚ö°Ô∏è<a class="hash-link" href="#3-add-api-route-Ô∏è" title="Direct link to heading">‚Äã</a></h2><p>Azure Static Web Apps has integrated API support provided by Azure Functions. In order to add and debug an API route, we must install some Azure Functions tools.</p><ol><li><p><strong>Azure Functions extension for VS Code</strong> - <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurefunctions" target="_blank" rel="noopener noreferrer">Install from Marketplace</a></p></li><li><p><strong>Azure Functions Core Tools</strong> - <a href="https://github.com/Azure/azure-functions-core-tools" target="_blank" rel="noopener noreferrer">View on GitHub</a></p></li></ol><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">npm i -g azure-functions-core-tools@4 --unsafe-perm true</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, you can add an API route to your app using the command palette (press <code>F1</code>) and searching &quot;Create HTTP Function&quot;.</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/12476526/169424449-3a10a9a0-025f-4fa3-b15f-294846fb0291.png" alt="Add HTTP Function" class="img_E7b_"></p><p>Select a language (I chose JavaScript), then name your Function (I put &quot;hello&quot;). And then an API route will be created for you that you can make requests to at <code>/api/hello</code>.</p><p><img loading="lazy" src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/emd9wo9q26m51aboyydd.png" alt="API route" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="4-debug-app--api-">4. Debug app &amp; API ‚ú®<a class="hash-link" href="#4-debug-app--api-" title="Direct link to heading">‚Äã</a></h2><p>We can debug our API routes and our frontend app simultaneously in VS Code.</p><p>Select the &quot;SWA: Run ...&quot; debug configuration and click the green &quot;Run and debug&quot; button.</p><p><img loading="lazy" src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/234k0e1p9jzmtyeeli56.png" alt="Run and debug" class="img_E7b_"></p><p>VS Code will now run your Functions API routes and your frontend. When it&#x27;s all started, a Chrome window will open at <code>http://localhost:4280</code>.</p><p>Set a breakpoint in your Function endpoint.</p><p><img loading="lazy" src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/89kolpnqbsrqysh661ep.png" alt="Function endpoint breakpoint" class="img_E7b_"></p><p>Go to <code>http://localhost:4280/api/hello</code> in the Chrome window to hit the breakpoint.</p><p><img loading="lazy" src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/2q8zt9j70wz4dr5h3mcm.png" alt="Hitting an API breakpoint" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="5-next-steps-Ô∏è">5. Next steps üèÉ‚Äç‚ôÄÔ∏è<a class="hash-link" href="#5-next-steps-Ô∏è" title="Direct link to heading">‚Äã</a></h2><p>Now that you got your static web app running locally, you can <a href="https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=react" target="_blank" rel="noopener noreferrer">deploy your static web app to Azure for free</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="troubleshooting-">Troubleshooting üîç<a class="hash-link" href="#troubleshooting-" title="Direct link to heading">‚Äã</a></h2><p>If you&#x27;re having issues, please check out the <a href="https://github.com/microsoft/vscode-azurestaticwebapps/wiki/Guide:-Debugging-a-Static-Web-App-with-VS-Code#troubleshooting-" target="_blank" rel="noopener noreferrer">troubleshooting section in our wiki</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="resources-">Resources üîó<a class="hash-link" href="#resources-" title="Direct link to heading">‚Äã</a></h2><ul><li><a href="https://docs.microsoft.com/en-us/azure/static-web-apps/" target="_blank" rel="noopener noreferrer">Azure Static Web Apps documentation</a></li><li><a href="https://github.com/Azure/static-web-apps-cli" target="_blank" rel="noopener noreferrer">Azure Static Web Apps CLI</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurestaticwebapps" target="_blank" rel="noopener noreferrer">Azure Static Web Apps extension for VS Code</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="next-week">Next Week<a class="hash-link" href="#next-week" title="Direct link to heading">‚Äã</a></h2><p>This marks the end of Week 3 of #30DaysOfSWA, with a focus on <code>Developer Tools</code>. Want a visual recap of what we covered .. here you go!! To recap:</p><ul><li>We provisioned Azure resources - using the Azure Portal and Azure CLI</li><li>We added automated, cross-browser, e2e testing - using Playwright</li><li>We built multi-stage deployment pipelines - using Azure DevOps</li><li>We debugged and audited perf &amp; accessibility - using Edge DevTools on VSCode</li><li>We got unified local development and cloud deployment - using SWA CLI</li><li>We explored rich extensions and seamless CLI interactions - using VS Code</li></ul><p><img loading="lazy" alt="Week 3 Visual Roadmap" src="/assets/images/week3-roadmap-1024ef94a5315bcf2a97a8e54c0787e6.png" width="3840" height="2160" class="img_E7b_"></p><p>So what do we have planned for next week? </p><p>We&#x27;ve already covered core concepts, usage examples and developer tools -- so that leaves: <strong>Best Practices!</strong> Join us for the final week of #30DaysOfSWA where we define the end-to-end developer experience, explore various Azure Service integrations to enhance your SWA, dive into a cool case study, and end with a <code>Tips &amp; Tricks</code> series that brings you back full circle to development.</p><p>Thanks for sticking with us on this journey!</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/swa">swa</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/30-days">30days</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/dev-tools">dev-tools</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about #21: Develop With VSCode" href="/blog/devtools-vscode"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/devtools-swacli-deploy">#20: Deploy with SWA CLI</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-21T00:00:00.000Z" itemprop="datePublished">May 21, 2022</time> ¬∑ <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/manekinekko" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/manekinekko.png" alt="Wassim Chegham"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/manekinekko" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wassim Chegham</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Cloud Advocate @Microsoft</small></div></div></div><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/sinedied" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/sinedied.png" alt="Yohan Lasorsa"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/sinedied" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Yohan Lasorsa</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Cloud Advocate @Microsoft</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to <code>Week 3, Day 6</code> of <strong>#30DaysOfSWA</strong>!! </p><p>This is second part of the 2-part series that focuses on the launch of the <a href="https://azure.github.io/static-web-apps-cli/?WT.mc_id=30daysofswa-61155-cxall" target="_blank" rel="noopener noreferrer">Azure Static Web Apps CLI</a> at the <a href="https://docs.microsoft.com/en-us/events/learntv/swa-anniversary-may-2022?WT.mc_id=30daysofswa-61155-cxall" target="_blank" rel="noopener noreferrer">Azure Static Web Apps Anniversary event</a> on May 19, 2022. Yesterday&#x27;s post introduced the core <code>swa</code> command and walked through the <code>swa init</code> and <code>swa start</code> commands - and covered configuration. </p><p>Today, we&#x27;ll explore the <code>swa login</code> and <code>swa deploy</code> commands that help with deploying your locally-developed app to the Azure cloud. And we&#x27;ll cover the use of Environment Variables to streamline the developer experience further.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>What We&#x27;ll Cover</h5></div><div class="admonition-content"><ul><li>Logging in to Azure</li><li>Deploying your app</li><li>Environment variables</li><li><strong>Exercise</strong>: Use the new <code>swa</code> CLI to authenticate, and deploy your app</li></ul></div></div><p><img loading="lazy" src="/assets/images/20-banner-62cb7a9019981d88c514d8875b8547d9.png" width="1000" height="420" class="img_E7b_"></p><p>For this second article about the SWA CLI, we&#x27;ll talk about the new deployment options. And yes, you can now deploy your apps straight from the command line! Who&#x27;s better than the person who implemented it to talk about it? I&#x27;ll let my friend <a href="https://twitter.com/manekinekko" target="_blank" rel="noopener noreferrer">Wassim</a> explain it all to you.</p><blockquote><p>If you&#x27;ve never heard of Static Web Apps (or SWA for short), it&#x27;s a web app hosting service provided by Azure, offering streamlined full-stack development with many built-in features like authentication, customizable routing, serverless functions and more. It also has a great <a href="https://azure.microsoft.com/free/?WT.mc_id=30daysofswa-61155-cxall" target="_blank" rel="noopener noreferrer">free tier</a> üòâ</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="logging-in-to-azure">Logging in to Azure<a class="hash-link" href="#logging-in-to-azure" title="Direct link to heading">‚Äã</a></h2><p>In the new SWA CLI for Azure Static Web Apps, we introduced a new <code>swa login</code> command allowing you to log in to your Azure account, straight from the command line. This command will encrypt and store your credentials in your system&#x27;s key Chain, so you don&#x27;t have to enter them again.</p><p>In most common cases, the <code>swa login</code> will pick your current active Azure credentials from the following locations (in this order):</p><ol><li>Your environment variables, if you have set one or all of following <a href="https://azure.github.io/static-web-apps-cli/docs/cli/env-vars#azure-identity?WT.mc_id=30daysofswa-61155-cxall" target="_blank" rel="noopener noreferrer">variables</a>:<ul><li><code>AZURE_TENANT_ID</code></li><li><code>AZURE_CLIENT_ID</code></li><li><code>AZURE_CLIENT_SECRET</code></li></ul></li><li>Your current Visual Studio Code, if you&#x27;re using VS Code and is connected to Azure.</li><li>Interactive prompt using your browser.</li><li>The last fallback is the device code flow, which will prompt you to log in to your Azure account using a generated device code.</li></ol><p>However, if you need, you can also provide any of these credentials from the command line, using the available flags:</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">Usage: swa login </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">login into Azure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -S, --subscription-id </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">subscriptionId</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">    Azure subscription ID used by this project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: </span><span class="token string" style="color:#e3116c">&quot;process.env.AZURE_SUBSCRIPTION_ID&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -R, --resource-group </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">resourceGroupName</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">  Azure resource group used by this project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -T, --tenant-id </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">tenantId</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                Azure tenant ID </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: </span><span class="token string" style="color:#e3116c">&quot;process.env.AZURE_TENANT_ID&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -C, --client-id </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">clientId</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                Azure client ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -CS, --client-secret </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">clientSecret</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       Azure client secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n, --app-name </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">appName</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">                  Azure Static Web App application name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -cc, --clear-credentials                  </span><span class="token function" style="color:#d73a49">clear</span><span class="token plain"> persisted credentials before login </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u, --use-keychain                        </span><span class="token builtin class-name">enable</span><span class="token plain"> using the operating system native keychain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> persistent credentials </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -nu, --no-use-keychain                    disable using the operating system native keychain</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once logged in, the SWA CLI will store your active Azure subscription ID and tenant ID in a local file called <code>.env</code> at the root of your project:</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">‚ûú swa login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to Azure Static Web Apps CLI </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking Azure session</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úî Successfully logged into Azure</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úî Saved project credentials </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> .env file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úî Successfully setup project</span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This file will be used when deploying your project to Azure using the <code>swa deploy</code> command.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="deploying-your-app">Deploying your app<a class="hash-link" href="#deploying-your-app" title="Direct link to heading">‚Äã</a></h2><p>The new SWA CLI makes it even more easier to deploy your apps to Azure. You can now deploy your app directly from the command line, using one single <code>swa deploy</code> command.</p><p>The <code>swa deploy</code> command is smarter enough to figure out if you already have an Azure Static Web Apps instance available, and if so, it will use it. Otherwise, it will create a new one on the fly - or prompt you to select one from a list of already available ones:</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">‚ûú swa deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to Azure Static Web Apps CLI </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Using configuration </span><span class="token string" style="color:#e3116c">&quot;thundr&quot;</span><span class="token plain"> from file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /home/wassimchegham/oss/@thundr-dev/thundr/swa-cli.config.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deploying front-end files from folder:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /home/wassimchegham/oss/@thundr-dev/thundr/app/dist/thundr-ui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deploying API from folder:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /home/wassimchegham/oss/@thundr-dev/thundr/api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking Azure session</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úî Successfully logged into Azure</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking project settings</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Choose your Static Web App ‚Ä∫ - Use arrow-keys. Return to submit.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚ùØ   </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> Create a new application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    swa_samples/angular-web-bluetooth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    swa_samples/catsify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    swa_samples/hexa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    swa_samples/ngxtools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    swa_samples/nitrooo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ‚Üì swa_samples/photobooth-teams</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>swa deploy</code> command is also able to detect if your existing Static Web Apps instance has already been deployed from a CI/CD pipeline and inform you about it!</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="deploying-from-a-cicd-pipeline">Deploying from a CI/CD pipeline<a class="hash-link" href="#deploying-from-a-cicd-pipeline" title="Direct link to heading">‚Äã</a></h2><p>Deploying from CI/CD pipelines is a common practice in many projects. You can use the <code>swa deploy</code> command to deploy your app to Azure from your CI/CD pipeline. You can accomplish this by setting a deployment token:</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">‚ûú swa deploy --print-token --app-name thundr --resource-group swa_samples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to Azure Static Web Apps CLI </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking project </span><span class="token string" style="color:#e3116c">&quot;thundr&quot;</span><span class="token plain"> settings</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úî Successfully setup project</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deploying to environment: preview</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deployment token:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7c3fc44b858164b677-truncated-8c80ace9-39a8-416c-ae22-864745c0470b003</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">swa deploy --deployment-token</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">7c3fc44b858164b677-truncated-8c80ace9-39a8-416c-ae22-864745c0470b003b003</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can also set the deployment token as an <a href="https://azure.github.io/static-web-apps-cli/docs/cli/env-vars#deploy-settings?WT.mc_id=30daysofswa-61155-cxall" target="_blank" rel="noopener noreferrer">environment variable</a>:</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">SWA_CLI_DEPLOYMENT_TOKEN</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">7c3fc44b858164b677-truncated-8c80ace9-39a8-416c-ae22-864745c0470b003b003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swa deploy</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="environment-variables">Environment variables<a class="hash-link" href="#environment-variables" title="Direct link to heading">‚Äã</a></h2><p>The new SWA CLI introduced a new set of environment variables to make it easier for you to configure your experience. You can customize the behavior of the SWA CLI by setting the following environment variables:</p><ul><li>General settings</li><li>Emulator settings</li><li>Deploy settings</li><li>Runtime settings</li><li>Login experience</li></ul><p>You can read more about these environment variables in the <a href="https://azure.github.io/static-web-apps-cli/docs/cli/env-vars??WT.mc_id=30daysofswa-61155-cxall" target="_blank" rel="noopener noreferrer">Environment Variables section</a> in our new documentation website.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="next-steps">Next steps<a class="hash-link" href="#next-steps" title="Direct link to heading">‚Äã</a></h2><p>From the start of your project to its deployment to Azure, with all the needed local testing in-between, you should now be equipped to take care of your complete development process all from the command line. Now the main challenge remaining for you is to deploy and grow your app üòâ.</p><p>If you&#x27;d like to learn some tips you can use when developing your app, you can check out the <a href="https://aka.ms/StaticWebAppsTips??WT.mc_id=30daysofswa-61155-cxall" target="_blank" rel="noopener noreferrer">Static Web Apps - Tips &amp; Tricks</a> video series.</p><p>You can also learn more about all the new features of the SWA CLI and how to use them by looking at the <a href="https://azure.github.io/static-web-apps-cli/?WT.mc_id=30daysofswa-61155-cxall" target="_blank" rel="noopener noreferrer">new docs website</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="tell-us-your-feedback">Tell us your feedback!<a class="hash-link" href="#tell-us-your-feedback" title="Direct link to heading">‚Äã</a></h2><p>We&#x27;re also here on dev.to to listen and help as much as we can! üôÇ</p><p>Please tell us your experience, your difficulties, your questions, and what features you would like to see in the next versions of the SWA CLI.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">‚Äã</a></h2><p>Want to see the Static Web Apps CLI in action? The tool became generally available yesterday, launching at the <a href="https://aka.ms/swaanniversary" target="_blank" rel="noopener noreferrer">Azure Static Web Apps Anniversary</a>. Watch the segment to see the SWA CLI in action.</p><iframe width="560" height="315" frameborder="0" src="https://www.youtube.com/embed/1e6k5HNK4F8?WT.mc_id=30daysofswa-61155-cxall" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/swa">swa</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/30-days">30days</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/dev-tools">dev-tools</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about #20: Deploy with SWA CLI" href="/blog/devtools-swacli-deploy"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/devtools-swacli-develop">#19: Develop with SWA CLI</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-20T00:00:00.000Z" itemprop="datePublished">May 20, 2022</time> ¬∑ <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://twitter.com/sinedied" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/sinedied.png" alt="Yohan Lasorsa"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/sinedied" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Yohan Lasorsa</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Cloud Advocate @Microsoft</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to <code>Week 3, Day 5</code> of <strong>#30DaysOfSWA</strong>!! </p><p>We&#x27;re past the halfway mark in &quot;Dev Tools&quot; week! We looked at developer tools to help provision Azure resources, automate cross-browser testing, streamline CI/CD, and debug/audit your SWA for performance and accessibility. But what about <strong>local development</strong> - something to help me go from <em>start</em> (project creation &amp; configuration) to <em>finish</em> (build &amp; deploy) in <strong>one tool</strong>? Let&#x27;s say hello to the <a href="https://aka.ms/30DaysOfSWA/swa-cli" target="_blank" rel="noopener noreferrer">Azure Static Web Apps CLI</a>.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>What We&#x27;ll Cover</h5></div><div class="admonition-content"><ul><li><code>swa</code> - One command to rule them all!</li><li>Creating the configuration</li><li>Building your project</li><li>Running your app locally</li><li><strong>Exercise</strong>: Use the new <code>swa</code> CLI to build and run a starter app!</li></ul></div></div><p><img loading="lazy" src="/assets/images/19-banner-ecd588da06f9f1af0f0e8a5f3323aa20.png" width="1000" height="420" class="img_E7b_"></p><p>You may have missed it, but the <a href="https://github.com/Azure/static-web-apps-cli" target="_blank" rel="noopener noreferrer">new Azure Static Web Apps CLI</a> is now available!</p><p>It would take a whole post to describe all the changes and new features, but here are some of the highlights. With the new <code>init</code>, <code>build</code>, <code>start</code> and <code>deploy</code> commands, the complete developement cycle of your app is now available <em>in a single tool</em>, directly from the command line. </p><p><img loading="lazy" src="/assets/images/19-cli-banner-1-1bac73f4685c9f14cf25034fe74a405e.jpeg" width="1000" height="420" class="img_E7b_"></p><p>To get started, make sur you have a recent <a href="https://nodejs.org" target="_blank" rel="noopener noreferrer">Node.js</a> version installed (&gt;14) and type this command in your terminal:</p><div class="language-sh codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-sh codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">npm i -g @azure/static-web-apps-cli</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We&#x27;ll now have a look at the new commands and the most important features.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you&#x27;ve never heard of Static Web Apps (or SWA for short), it&#x27;s a web app hosting service provided by Azure, offering streamlined full-stack development with many built-in features like authentication, customizable routing, serverless functions and more. It also has a great <a href="https://azure.microsoft.com/free/?WT.mc_id=javascript-0000-yolasors" target="_blank" rel="noopener noreferrer">free tier</a> üòâ</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="swa"><code>swa</code><a class="hash-link" href="#swa" title="Direct link to heading">‚Äã</a></h2><p>As the new CLI introduces a gazillion new options, it must quite a steep learning curve to get started? Quite the opposite!</p><p>Every command starts with <code>swa</code>, and now it might also be the only thing you&#x27;ll need.</p><div class="language-sh codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-sh codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain"># yes, that&#x27;s all you need to type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swa</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command is a macro shorcut for <code>swa init</code>, <code>swa build</code>, <code>swa login</code> and <code>swa deploy</code>. We&#x27;ll get to the details of all these commands in a bit, the most important thing here is that <code>swa</code> is the only command you need to know to configure a new project for use with Static Web Apps, build it and deploy it. You don&#x27;t have to worry about any options or flags, just type <code>swa</code> and you&#x27;ll be on your way. </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="creating-the-configuration">Creating the configuration<a class="hash-link" href="#creating-the-configuration" title="Direct link to heading">‚Äã</a></h2><p>The first of the new commands is <code>swa init</code>. This commands with detect your project configuration and the frameworks you&#x27;re using to suggest a configuration for you, so you won&#x27;t have to read through <a href="https://azure.github.io/static-web-apps-cli/" target="_blank" rel="noopener noreferrer">the shiny new docs</a> to figure out what options you need.</p><p><img loading="lazy" alt="swa init command screenshot" src="/assets/images/19-init-d5f344eba5b610e07a7b54f390b6a958.png" width="1138" height="423" class="img_E7b_"></p><p>After asking a name for your project configuration, you can validate or edit the detected project settings. Once finished, it will create a <code>swa-cli.config.json</code> file in the current folder with your settings. You can commit this file in your project repository so everyone from your team can use it.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="building-your-project">Building your project<a class="hash-link" href="#building-your-project" title="Direct link to heading">‚Äã</a></h2><p>After the configuration is created, you&#x27;re all set to use other commands without having to bother with any options or flags.</p><p>Whether you need to build your front-end app, your API, or both, the <code>swa build</code> command will do the job. It also takes care of installing your NPM dependencies (if needed) detecting if you&#x27;re using npm, Yarn or PNPM with your project.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="running-your-app-locally">Running your app locally<a class="hash-link" href="#running-your-app-locally" title="Direct link to heading">‚Äã</a></h2><p>Historically, being able to run your app locally was the first feature of the SWA CLI. Of course it&#x27;s still there, and <code>swa start</code> allows you to emulate the SWA runtime environment, along with the routing, authentication features and API. A few changes were made to improve the developer experience, and of course bugs were fixed to more closely match the real SWA runtime.</p><p>Previously, if you were using an API, you had to install <a href="https://docs.microsoft.com/azure/azure-functions/functions-run-local?tabs=v4%2Cwindows%2Ccsharp%2Cportal%2Cbash&amp;WT.mc_id=javascript-0000-yolasors#publish" target="_blank" rel="noopener noreferrer">Functions Core Tools</a> and make sure to match the tools version with the Node.js version you&#x27;re using, but now the whole process is automated for you. If you don&#x27;t have the tools installed or if the wrong version is installed, you don&#x27;t have to worry about it: it will be automatically installed for you when needed.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="next-steps">Next steps<a class="hash-link" href="#next-steps" title="Direct link to heading">‚Äã</a></h2><p>With these new commands, you can already setup your project, build it and test it locally. Using <code>swa start</code> is also great for debugging your app and API in a live running environment. Once you&#x27;re happy with the result, you can deploy it to Azure, and that&#x27;s what we&#x27;ll explore in the next post.</p><p>In the meantime, you can also head to <a href="https://azure.github.io/static-web-apps-cli/" target="_blank" rel="noopener noreferrer">the new docs website</a> to learn more about the new features and how to use them.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="tell-us-your-feedback">Tell us your feedback!<a class="hash-link" href="#tell-us-your-feedback" title="Direct link to heading">‚Äã</a></h2><p>We&#x27;re also <a href="https://dev.to/azure/get-started-with-the-new-azure-static-web-apps-cli-mm3" target="_blank" rel="noopener noreferrer">here on dev.to</a> to listen and help as much as we can! üôÇ</p><p>Please tell us your experience, your difficulties, your questions, and what features you would like to see in the next versions of the SWA CLI.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">‚Äã</a></h2><p>Want to see the Static Web Apps CLI in action? The tool became generally available yesterday, launching at the <a href="https://aka.ms/swaanniversary" target="_blank" rel="noopener noreferrer">Azure Static Web Apps Anniversary</a>. Watch the segment to see the SWA CLI in action.</p><iframe width="560" height="315" frameborder="0" src="https://www.youtube.com/embed/1e6k5HNK4F8" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/swa">swa</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/30-days">30days</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/dev-tools">dev-tools</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about #19: Develop with SWA CLI" href="/blog/devtools-swacli-develop"><b>Read More</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/tags/swa/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 Microsoft  - Built with <a href="https://docusaurus.io"> Docusaurus </a> - Deployed to <a href="https://aka.ms/swa"> Azure </a> - Created by <a href="https://github.com/nitya"> @nitya </a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.1df1f584.js"></script>
<script src="/assets/js/main.bdfe7c17.js"></script>
</body>
</html>